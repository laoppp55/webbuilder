/*
 * JSP generated by Resin-4.0.58 (built Fri, 24 Aug 2018 01:23:14 PDT)
 */

package _jsp._article;
import javax.servlet.*;
import javax.servlet.jsp.*;
import javax.servlet.http.*;
import com.bizwink.cms.util.SessionUtil;
import com.bizwink.cms.security.Auth;
import com.bizwink.cms.util.ParamUtil;
import com.bizwink.po.Column;
import org.springframework.context.ApplicationContext;
import com.bizwink.util.SpringInit;
import com.bizwink.service.ColumnService;
import java.math.BigDecimal;
import java.util.List;
import com.bizwink.cms.security.SecurityCheck;
import java.util.ArrayList;
import com.bizwink.cms.security.PermissionSet;
import java.util.Iterator;
import com.bizwink.cms.security.Permission;
import com.bizwink.cms.tree.TreeManager;
import com.bizwink.cms.tree.Tree;
import com.bizwink.cms.tree.node;

public class _indexnew__jsp extends com.caucho.jsp.JavaPage
{
  private static final java.util.HashMap<String,java.lang.reflect.Method> _jsp_functionMap = new java.util.HashMap<String,java.lang.reflect.Method>();
  private boolean _caucho_isDead;
  private boolean _caucho_isNotModified;
  private com.caucho.jsp.PageManager _jsp_pageManager;
  
  public void
  _jspService(javax.servlet.http.HttpServletRequest request,
              javax.servlet.http.HttpServletResponse response)
    throws java.io.IOException, javax.servlet.ServletException
  {
    javax.servlet.http.HttpSession session = request.getSession(true);
    com.caucho.server.webapp.WebApp _jsp_application = _caucho_getApplication();
    com.caucho.jsp.PageContextImpl pageContext = _jsp_pageManager.allocatePageContext(this, _jsp_application, request, response, null, session, 8192, true, false);

    TagState _jsp_state = null;

    try {
      _jspService(request, response, pageContext, _jsp_application, session, _jsp_state);
    } catch (java.lang.Throwable _jsp_e) {
      pageContext.handlePageException(_jsp_e);
    } finally {
      _jsp_pageManager.freePageContext(pageContext);
    }
  }
  
  private void
  _jspService(javax.servlet.http.HttpServletRequest request,
              javax.servlet.http.HttpServletResponse response,
              com.caucho.jsp.PageContextImpl pageContext,
              javax.servlet.ServletContext application,
              javax.servlet.http.HttpSession session,
              TagState _jsp_state)
    throws Throwable
  {
    javax.servlet.jsp.JspWriter out = pageContext.getOut();
    final javax.el.ELContext _jsp_env = pageContext.getELContext();
    javax.servlet.ServletConfig config = getServletConfig();
    javax.servlet.Servlet page = this;
    javax.servlet.jsp.tagext.JspTag _jsp_parent_tag = null;
    com.caucho.jsp.PageContextImpl _jsp_parentContext = pageContext;
    response.setContentType("text/html;charset=UTF-8");

    out.write(_jsp_string0, 0, _jsp_string0.length);
    
    Auth authToken = SessionUtil.getUserAuthorization(request, response, session);
    if (authToken == null)
    {
        response.sendRedirect(response.encodeRedirectURL("/webbuilder/index.jsp?msg=\u7cfb\u7edf\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u767b\u9646!"));
        return;
    }

    int siteid = authToken.getSiteID();
    String sitename = authToken.getSitename();
    int samsiteid = authToken.getSamSiteid();
    String userid = authToken.getUserID();
    int sitetype = authToken.getSitetype();
    int columnID = ParamUtil.getIntParameter(request,"column",0);
    int currentPage = ParamUtil.getIntParameter(request,"start",1);
    int range = ParamUtil.getIntParameter(request,"range",0);
    boolean doSearchFlag = ParamUtil.getBooleanParameter(request,"searchFlag");
    int flag = ParamUtil.getIntParameter(request,"flag",0);
    int ascdesc = ParamUtil.getIntParameter(request,"ascdesc",0);
    String from = ParamUtil.getParameter(request,"from");
    int rightid = ParamUtil.getIntParameter(request, "rightid", 0);
    Tree colTree = null;

    Column rootColumn = null;
    ApplicationContext appContext = SpringInit.getApplicationContext();
    if (appContext!=null) {
        ColumnService columnService = (ColumnService)appContext.getBean("columnService");
        rootColumn = columnService.getRootColumnBySiteid(BigDecimal.valueOf(siteid));
    }

    int rootColumnID = rootColumn.getID().intValue();
    if (sitetype == 0 || sitetype == 2) {                             //0\u8868\u793a\u81ea\u5df1\u521b\u5efa\u7684\u7f51\u7ad9\uff0c2\u8868\u793a\u5b8c\u6574\u62f7\u8d1d\u6a21\u677f\u7f51\u7ad9
        if (!userid.equalsIgnoreCase("admin") && !SecurityCheck.hasPermission(authToken, 54)) {
            //\u666e\u901a\u7528\u6237
            List clist = new ArrayList();
            PermissionSet p_set = authToken.getPermissionSet();
            Iterator iter1 = p_set.elements();
            while (iter1.hasNext()) {
                Permission permission = (Permission) iter1.next();
                if (rightid == permission.getRightID()) {
                    clist = permission.getColumnListOnRight();
                    break;
                }
            }
            colTree = TreeManager.getInstance().getUserTree(userid, siteid, clist,rightid);
        } else if (!userid.equalsIgnoreCase("admin") && SecurityCheck.hasPermission(authToken, 54)) {
            //\u7ad9\u70b9\u7ba1\u7406\u5458
            colTree = TreeManager.getInstance().getSiteTree(siteid);
        }
    } else {                                                           //1\u8868\u793a\u5171\u4eab\u6a21\u677f\u7f51\u7ad9\u7684\u680f\u76ee\u548c\u6a21\u677f
        if (!userid.equalsIgnoreCase("admin") && !SecurityCheck.hasPermission(authToken, 54)) {
            //\u666e\u901a\u7528\u6237
            List clist = new ArrayList();
            PermissionSet p_set = authToken.getPermissionSet();
            Iterator iter1 = p_set.elements();
            while (iter1.hasNext()) {
                Permission permission = (Permission) iter1.next();
                if (rightid == permission.getRightID()) {
                    clist = permission.getColumnListOnRight();
                    break;
                }
            }
            colTree = TreeManager.getInstance().getUserTree(userid, siteid, clist,rightid);
        } else if (!userid.equalsIgnoreCase("admin") && SecurityCheck.hasPermission(authToken, 54)) {
            //\u7ad9\u70b9\u7ba1\u7406\u5458
            colTree = TreeManager.getInstance().getSiteTreeIncludeSampleSite(siteid,samsiteid);
        }
    }

    //\u6784\u5efa\u680f\u76ee\u6811\u7684JSON\u6570\u636e
    StringBuffer buf = new StringBuffer();                        //\u5b58\u50a8\u751f\u6210\u7684\u83dc\u5355\u6811
    if (colTree.getNodeNum() > 1) {
        node[] treeNodes = colTree.getAllNodes();                     //\u83b7\u53d6\u8be5\u6811\u7684\u6240\u6709\u8282\u70b9
        List<Integer> pid = new ArrayList<Integer>();
        int currentID = 0;                                            //\u5f53\u524d\u6b63\u5728\u5904\u7406\u7684\u8282\u70b9
        int i = 0;                                                      //\u5faa\u73af\u53d8\u91cf
        int[] ordernum = new int[colTree.getNodeNum()];               //\u5f53\u524d\u8282\u70b9\u6240\u6709\u5b50\u8282\u70b9\u7684\u987a\u5e8f\u53f7
        int nodenum = 1;                                              //\u5f53\u524d\u88ab\u5904\u7406\u8282\u70b9\u7684\u521d\u59cb\u503c
        int subnodenum = 1;                                              //\u5224\u65ad\u5f53\u524d\u8282\u70b9\u662f\u5426\u6709\u5b50\u8282\u70b9
        int subnodenumOfParentNode = 0;

        pid.add(0);
        buf.append("[");
        while(pid.size()>0) {
            //\u5904\u7406\u5f53\u524d\u8282\u70b9
            currentID = pid.get(0);
            pid.remove(0);
            int currentNodeIndex = 0;
            int currentNode_ParentNodeIndex = 0;
            //\u83b7\u53d6\u5f53\u524d\u8282\u70b9
            for (i = 0; i < colTree.getNodeNum(); i++) {
                if (treeNodes[i].getId() == currentID) {
                    currentNodeIndex = i;
                    break;
                }
            }

            //\u83b7\u53d6\u5f53\u524d\u8282\u70b9\u7684\u7236\u8282\u70b9
            for (i = 0; i < colTree.getNodeNum(); i++) {
                if (treeNodes[i].getId() == treeNodes[currentNodeIndex].getLinkPointer()) {
                    currentNode_ParentNodeIndex = i;
                    break;
                }
            }

            //\u4ece\u5904\u7406\u7684\u8282\u70b9\u6570\u7ec4\u4e2d\u53d6\u51fa\u5f53\u524d\u6b63\u5728\u5904\u7406\u7684\u5143\u7d20\uff0c\u67e5\u627e\u8be5\u5143\u7d20\u4e0b\u7684\u5b50\u5143\u7d20
            //\u8bbe\u7f6e\u6240\u6709\u5b50\u8282\u70b9\u7684\u7236\u83dc\u5355\u540d\u79f0\uff0c\u8bbe\u7f6e\u6240\u6709\u5b50\u8282\u70b9\u7684\u5e8f\u5217\u53f7\uff0c\u628a\u6240\u6709\u7684\u5b50\u8282\u70b9\u5b58\u5165pid\u6570\u7ec4\u4e2d
            subnodenum = 0;
            nodenum = nodenum - 1;
            for (i = colTree.getNodeNum() - 1; i >= 0; i--) {
                if (treeNodes[i].getLinkPointer() == currentID) {
                    nodenum = nodenum + 1;
                    pid.add(0, treeNodes[i].getId());
                    ordernum[nodenum] = subnodenum;
                    subnodenum = subnodenum + 1;
                }
            }

            //\u5904\u7406\u5f53\u524d\u8282\u70b9
            if (currentID != 0) {
                //\u5f53\u524d\u8282\u70b9\u7684\u7236\u8282\u70b9\u7684\u5b50\u8282\u70b9\u6570\u91cf\u51cf1
                subnodenumOfParentNode = treeNodes[currentNode_ParentNodeIndex].getSubnodes() - 1;
                //\u4fee\u6539\u5f53\u524d\u8282\u70b9\u7236\u8282\u70b9\u672a\u5904\u7406\u7684\u5b50\u8282\u70b9\u7684\u6570\u91cf
                treeNodes[currentNode_ParentNodeIndex].setSubnodes(subnodenumOfParentNode);
                //\u8bbe\u7f6e\u5f53\u524d\u8282\u70b9\u5b50\u8282\u70b9\u7684\u6570\u91cf
                treeNodes[currentNodeIndex].setSubnodes(subnodenum);
                //\u5904\u7406\u5f53\u524d\u8282\u70b9\u6ca1\u6709\u5b50\u8282\u70b9\u7684\u60c5\u51b5
                if (subnodenum == 0) {
                    //\u5f53\u524d\u8282\u70b9\u662f\u7236\u8282\u70b9\u7684\u6700\u540e\u4e00\u4e2a\u8282\u70b9,\u5faa\u73af\u5411\u6811\u5f62\u7ed3\u6784\u7684\u4e0a\u5c42\u8fdb\u884c\u67e5\u627e\uff0c\u4e00\u76f4\u627e\u5230\u5b50\u8282\u70b9\u6570\u5c1a\u4e0d\u662f\u96f6\u7684\u8282\u70b9\uff0c\u4ece\u4e0d\u662f\u96f6\u7684\u8282\u70b9\u5411\u4e0b\u5199\u8282\u70b9\u7684\u7ed3\u675f\u90e8\u5206
                    if (subnodenumOfParentNode == 0) {
                        buf.append("{title:'" + treeNodes[currentNodeIndex].getChName() + "',id:" + currentID + "}\r");
                        //\u5bfb\u627e\u5f53\u524d\u8282\u70b9\u5411\u4e0a\u7684\u8def\u5f84\u4e0a\u5b50\u8282\u70b9\u6570\u4e0d\u662f\u96f6\u7684\u8282\u70b9
                        int tnum = 0;
                        int level = 0;
                        while (tnum == 0 && treeNodes[currentNodeIndex].getLinkPointer() > 0) {
                            for (i = 0; i < colTree.getNodeNum(); i++) {
                                if (treeNodes[i].getId() == treeNodes[currentNodeIndex].getLinkPointer()) {
                                    tnum = treeNodes[i].getSubnodes();
                                    if (tnum == 0) {
                                        level = level + 1;
                                        currentNodeIndex = i;
                                        break;
                                    }
                                }
                            }
                        }

                        //\u4ece\u5f53\u524d\u8282\u70b9\u5230\u6839\u8282\u70b9\u7684\u8def\u5f84\u4e0a\u67e5\u627e\u5230\u7b2c\u4e00\u4e2a\u672a\u5904\u7406\u5b50\u8282\u70b9\u6570\u4e0d\u4e3a\u96f6\u7684\u8282\u70b9\uff0c\u8f93\u51fa\u76f8\u5e94\u6df1\u5ea6\u4e2a\u6570\u7684\u201c]}\u201d\u5b57\u7b26\u4e32
                        for (i = 0; i < level-1; i++) buf.append("]}\r");

                        buf.append("]},\r");
                    } else {                         //\u5f53\u524d\u8282\u70b9\u4e0d\u662f\u7236\u8282\u70b9\u7684\u6700\u540e\u4e00\u4e2a\u8282\u70b9
                        buf.append("{title:'" + treeNodes[currentNodeIndex].getChName() + "',id:" + currentID + "},\r");
                    }
                } else {
                    if (treeNodes[currentNodeIndex].getLinkPointer()==0)
                        buf.append("{title:'" + treeNodes[currentNodeIndex].getChName() + "',id:" + currentID + ",spread: true," + "children:[\r");
                    else
                        buf.append("{title:'" + treeNodes[currentNodeIndex].getChName() + "',id:" + currentID + "," + "children:[\r");
                }
            }
        }

        //\u53bb\u6389\u5b57\u7b26\u4e32\u6700\u540e\u4e00\u4e2a\u591a\u4f59\u7684\u201c,\u201d\u5b57\u7b26\uff0c\u589e\u52a0json\u7684\u5173\u95ed\u5b57\u7b26\u201c];\u201d
        int posi = buf.lastIndexOf(",");
        if (posi>-1) {
            buf.delete(posi,buf.length());
            buf.append("\r]");
        }
    }

    out.write(_jsp_string1, 0, _jsp_string1.length);
    out.print((columnID));
    out.write(_jsp_string2, 0, _jsp_string2.length);
    out.print((currentPage));
    out.write(_jsp_string3, 0, _jsp_string3.length);
    out.print((doSearchFlag));
    out.write(_jsp_string4, 0, _jsp_string4.length);
    out.print((flag));
    out.write(_jsp_string5, 0, _jsp_string5.length);
    out.print((ascdesc));
    out.write(_jsp_string6, 0, _jsp_string6.length);
    out.write(_jsp_string7, 0, _jsp_string7.length);
    out.write(_jsp_string8, 0, _jsp_string8.length);
    out.write(_jsp_string9, 0, _jsp_string9.length);
    out.print((userid));
    out.write(_jsp_string10, 0, _jsp_string10.length);
    out.print((userid));
    out.write(_jsp_string11, 0, _jsp_string11.length);
    out.print((userid));
    out.write(_jsp_string12, 0, _jsp_string12.length);
    out.print((userid));
    out.write(_jsp_string13, 0, _jsp_string13.length);
    out.print((userid));
    out.write(_jsp_string14, 0, _jsp_string14.length);
    out.write(_jsp_string15, 0, _jsp_string15.length);
    out.write(_jsp_string16, 0, _jsp_string16.length);
    out.write(_jsp_string17, 0, _jsp_string17.length);
    pageContext.include("../include/menu.jsp", false);out.write(_jsp_string18, 0, _jsp_string18.length);
    out.print((columnID));
    out.write(_jsp_string19, 0, _jsp_string19.length);
    out.print((currentPage));
    out.write(_jsp_string20, 0, _jsp_string20.length);
    out.print((flag));
    out.write(_jsp_string21, 0, _jsp_string21.length);
    out.print((ascdesc));
    out.write(_jsp_string22, 0, _jsp_string22.length);
    out.print((doSearchFlag));
    out.write(_jsp_string23, 0, _jsp_string23.length);
    out.print((rightid));
    out.write(_jsp_string24, 0, _jsp_string24.length);
    out.print((columnID));
    out.write(',');
    out.print((currentPage));
    out.write(_jsp_string25, 0, _jsp_string25.length);
    out.print((flag));
    out.write(',');
    out.print((ascdesc));
    out.write(_jsp_string26, 0, _jsp_string26.length);
    out.print((columnID));
    out.write(',');
    out.print((range));
    out.write(',');
    out.print((currentPage));
    out.write(',');
    out.print((doSearchFlag));
    out.write(',');
    out.print((flag));
    out.write(',');
    out.print((ascdesc));
    out.write(_jsp_string27, 0, _jsp_string27.length);
    out.print((columnID));
    out.write(',');
    out.print((range));
    out.write(',');
    out.print((currentPage));
    out.write(',');
    out.print((doSearchFlag));
    out.write(',');
    out.print((flag));
    out.write(',');
    out.print((ascdesc));
    out.write(_jsp_string28, 0, _jsp_string28.length);
    out.print((columnID));
    out.write(',');
    out.print((range));
    out.write(',');
    out.print((currentPage));
    out.write(',');
    out.print((doSearchFlag));
    out.write(',');
    out.print((flag));
    out.write(',');
    out.print((ascdesc));
    out.write(_jsp_string29, 0, _jsp_string29.length);
    out.print((columnID));
    out.write(',');
    out.print((range));
    out.write(',');
    out.print((currentPage));
    out.write(',');
    out.print((doSearchFlag));
    out.write(',');
    out.print((flag));
    out.write(',');
    out.print((ascdesc));
    out.write(_jsp_string30, 0, _jsp_string30.length);
    out.print((columnID));
    out.write(',');
    out.print((range));
    out.write(',');
    out.print((currentPage));
    out.write(',');
    out.print((doSearchFlag));
    out.write(',');
    out.print((flag));
    out.write(',');
    out.print((ascdesc));
    out.write(_jsp_string31, 0, _jsp_string31.length);
    out.print((columnID));
    out.write(',');
    out.print((range));
    out.write(',');
    out.print((currentPage));
    out.write(',');
    out.print((doSearchFlag));
    out.write(',');
    out.print((flag));
    out.write(',');
    out.print((ascdesc));
    out.write(_jsp_string32, 0, _jsp_string32.length);
    out.print((columnID));
    out.write(',');
    out.print((range));
    out.write(',');
    out.print((currentPage));
    out.write(',');
    out.print((doSearchFlag));
    out.write(',');
    out.print((flag));
    out.write(',');
    out.print((ascdesc));
    out.write(_jsp_string33, 0, _jsp_string33.length);
    out.print((columnID));
    out.write(',');
    out.print((range));
    out.write(',');
    out.print((currentPage));
    out.write(',');
    out.print((doSearchFlag));
    out.write(',');
    out.print((flag));
    out.write(',');
    out.print((ascdesc));
    out.write(_jsp_string34, 0, _jsp_string34.length);
    out.print((columnID));
    out.write(',');
    out.print((range));
    out.write(',');
    out.print((currentPage));
    out.write(',');
    out.print((doSearchFlag));
    out.write(',');
    out.print((flag));
    out.write(',');
    out.print((ascdesc));
    out.write(_jsp_string35, 0, _jsp_string35.length);
    pageContext.include("../include/tail.jsp", false);out.write(_jsp_string36, 0, _jsp_string36.length);
    out.print((buf.toString()));
    out.write(_jsp_string37, 0, _jsp_string37.length);
  }

  private com.caucho.make.DependencyContainer _caucho_depends
    = new com.caucho.make.DependencyContainer();

  public java.util.ArrayList<com.caucho.vfs.Dependency> _caucho_getDependList()
  {
    return _caucho_depends.getDependencies();
  }

  public void _caucho_addDepend(com.caucho.vfs.PersistentDependency depend)
  {
    super._caucho_addDepend(depend);
    _caucho_depends.add(depend);
  }

  protected void _caucho_setNeverModified(boolean isNotModified)
  {
    _caucho_isNotModified = true;
  }

  public boolean _caucho_isModified()
  {
    if (_caucho_isDead)
      return true;

    if (_caucho_isNotModified)
      return false;

    if (com.caucho.server.util.CauchoSystem.getVersionId() != 6165118203484593848L)
      return true;

    return _caucho_depends.isModified();
  }

  public long _caucho_lastModified()
  {
    return 0;
  }

  public void destroy()
  {
      _caucho_isDead = true;
      super.destroy();
    TagState tagState;
  }

  public void init(com.caucho.vfs.Path appDir)
    throws javax.servlet.ServletException
  {
    com.caucho.vfs.Path resinHome = com.caucho.server.util.CauchoSystem.getResinHome();
    com.caucho.vfs.MergePath mergePath = new com.caucho.vfs.MergePath();
    mergePath.addMergePath(appDir);
    mergePath.addMergePath(resinHome);
    com.caucho.loader.DynamicClassLoader loader;
    loader = (com.caucho.loader.DynamicClassLoader) getClass().getClassLoader();
    String resourcePath = loader.getResourcePathSpecificFirst();
    mergePath.addClassPath(resourcePath);
    com.caucho.vfs.Depend depend;
    depend = new com.caucho.vfs.Depend(appDir.lookup("article/indexnew.jsp"), 6801181809204045677L, false);
    _caucho_depends.add(depend);
    loader.addDependency(depend);
  }

  final static class TagState {

    void release()
    {
    }
  }

  public java.util.HashMap<String,java.lang.reflect.Method> _caucho_getFunctionMap()
  {
    return _jsp_functionMap;
  }

  public void caucho_init(ServletConfig config)
  {
    try {
      com.caucho.server.webapp.WebApp webApp
        = (com.caucho.server.webapp.WebApp) config.getServletContext();
      init(config);
      if (com.caucho.jsp.JspManager.getCheckInterval() >= 0)
        _caucho_depends.setCheckInterval(com.caucho.jsp.JspManager.getCheckInterval());
      _jsp_pageManager = webApp.getJspApplicationContext().getPageManager();
      com.caucho.jsp.TaglibManager manager = webApp.getJspApplicationContext().getTaglibManager();
      com.caucho.jsp.PageContextImpl pageContext = new com.caucho.jsp.InitPageContextImpl(webApp, this);
    } catch (Exception e) {
      throw com.caucho.config.ConfigException.create(e);
    }
  }

  private final static char []_jsp_string17;
  private final static char []_jsp_string18;
  private final static char []_jsp_string3;
  private final static char []_jsp_string32;
  private final static char []_jsp_string2;
  private final static char []_jsp_string31;
  private final static char []_jsp_string20;
  private final static char []_jsp_string28;
  private final static char []_jsp_string34;
  private final static char []_jsp_string23;
  private final static char []_jsp_string4;
  private final static char []_jsp_string26;
  private final static char []_jsp_string24;
  private final static char []_jsp_string11;
  private final static char []_jsp_string6;
  private final static char []_jsp_string27;
  private final static char []_jsp_string12;
  private final static char []_jsp_string21;
  private final static char []_jsp_string0;
  private final static char []_jsp_string1;
  private final static char []_jsp_string36;
  private final static char []_jsp_string30;
  private final static char []_jsp_string15;
  private final static char []_jsp_string29;
  private final static char []_jsp_string16;
  private final static char []_jsp_string10;
  private final static char []_jsp_string33;
  private final static char []_jsp_string7;
  private final static char []_jsp_string14;
  private final static char []_jsp_string5;
  private final static char []_jsp_string22;
  private final static char []_jsp_string13;
  private final static char []_jsp_string35;
  private final static char []_jsp_string8;
  private final static char []_jsp_string9;
  private final static char []_jsp_string25;
  private final static char []_jsp_string19;
  private final static char []_jsp_string37;
  static {
    _jsp_string17 = "ed').each(function(i) {\r\n                selArticleIds = selArticleIds + $(this).val() + \",\";\r\n            });\r\n\r\n            if (selArticleIds.length>0) selArticleIds = selArticleIds.substring(0,selArticleIds.length-1);\r\n            if (selArticleIds.length==0) {\r\n                layer.alert('\u8bf7\u9009\u62e9\u9700\u8981\u8bbe\u7f6e\u672a\u7528\u7684\u6587\u7ae0\uff01\uff01\uff01')\r\n            } else\r\n                htmlobj=$.ajax({\r\n                    url:\"batchUnuse.jsp\",\r\n                    data:{\r\n                        column:columnID,\r\n                        articles:selArticleIds\r\n                    },\r\n                    dataType:'json',\r\n                    async:false,\r\n                    success:function(jsondata){\r\n                        var tb = document.getElementById('articleDataGrid');\r\n                        if (jsondata.ERRCODE == 0) {\r\n                            var articleids= new Array();      //\u5b9a\u4e49\u4e00\u6570\u7ec4\r\n                            articleids=selArticleIds.split(\",\");        //\u5b57\u7b26\u5206\u5272\r\n                            for(var ii=0; ii<articleids.length; ii++) {\r\n                                var tr = document.getElementById('row' + articleids[ii]);\r\n                                tr.cells[1].innerHTML = \"<img src=\\\"../images/button/wei.gif\\\" border=0 alt=\\\"\u5f52\u6863\\\">\";\r\n                            }\r\n                            layer.alert('\u6587\u7ae0\u8bbe\u7f6e\u672a\u7528\u6210\u529f\uff01\uff01\uff01')\r\n                        } else {\r\n                            layer.alert('\u6587\u7ae0\u8bbe\u7f6e\u672a\u7528\u5931\u8d25\uff01\uff01\uff01')\r\n                        }\r\n                    },\r\n                    error: function (jqXHR, textStatus, errorThrown) {\r\n                        alert(jqXHR.responseText);\r\n                        alert(jqXHR.status);\r\n                        alert(jqXHR.readyState);\r\n                        alert(jqXHR.statusText);\r\n                        alert(textStatus);\r\n                        alert(errorThrown);\r\n                    }\r\n                });\r\n        }\r\n\r\n        //columnid:\u83b7\u53d6\u8be5\u680f\u76ee\u7684\u6587\u7ae0\u5217\u8868\r\n        //currentPage:\u5f53\u524d\u9875\u53f7\r\n        //doSearchFlag\uff1a\u662f\u5426\u6267\u884c\u68c0\u7d22\u529f\u80fd\r\n        //flag:\u8bbe\u7f6e\u6392\u5e8f\u5b57\u6bb5\r\n        //ascdesc\uff1a\u5347\u5e8f\u6392\u5217\u8fd8\u662f\u964d\u5e8f\u6392\u5217\uff0c0\u5347\u5e8f\u6392\u5217\uff0c1\u964d\u5e8f\u6392\u5217\r\n        //auditflag\uff1a\u6587\u7ae0\u5ba1\u6838\u72b6\u6001\r\n        //pubflag\uff1a\u6587\u7ae0\u662f\u5426\u88ab\u53d1\u5e03\r\n        //mediatype\uff1a\u591a\u5a92\u4f53\u6587\u4ef6\r\n        //status\uff1a\u83b7\u53d6\u90a3\u4e9b\u72b6\u6001\u7684\u6587\u7ae0\uff0c0\uff1a\u4efb\u4f55\u72b6\u6001\uff0c1\uff1a\u65b0\u9ad8\uff0c2\uff1a\u5f52\u6863\uff0c3\uff1a\u7b49\u5f85\u591a\u5a92\u4f53\u6587\u4ef6\u8f6c\u6362\uff0c4\uff1a\u5546\u54c1\u4fc3\u9500\uff0c5\uff1a\u65b0\u54c1\u5546\u54c1\uff0c6\uff1a\u6d3b\u52a8\u4fc3\u9500\r\n        function auditArticles(columnID,range, currentPage,doSearchFlag,flag,ascdesc,auditflag) {\r\n            var columnID = searchForm.column.value;\r\n            var doSearchFlag = searchForm.searchFlag.value;\r\n            var flag = searchForm.flag.value;\r\n            var ascdesc = searchForm.ascdesc.value;\r\n            var currentPage = searchForm.pageno.value\r\n            var arttypeval = searchForm.arttype.value;\r\n\r\n            articlesInfoList(columnID,1,false,4,0,auditflag,null,null,null);\r\n        }\r\n\r\n        //columnid:\u83b7\u53d6\u8be5\u680f\u76ee\u7684\u6587\u7ae0\u5217\u8868\r\n        //currentPage:\u5f53\u524d\u9875\u53f7\r\n        //doSearchFlag\uff1a\u662f\u5426\u6267\u884c\u68c0\u7d22\u529f\u80fd\r\n        //flag:\u8bbe\u7f6e\u6392\u5e8f\u5b57\u6bb5\r\n        //ascdesc\uff1a\u5347\u5e8f\u6392\u5217\u8fd8\u662f\u964d\u5e8f\u6392\u5217\uff0c0\u5347\u5e8f\u6392\u5217\uff0c1\u964d\u5e8f\u6392\u5217\r\n        //auditflag\uff1a\u6587\u7ae0\u5ba1\u6838\u72b6\u6001\r\n        //pubflag\uff1a\u6587\u7ae0\u662f\u5426\u88ab\u53d1\u5e03\r\n        //mediatype\uff1a\u591a\u5a92\u4f53\u6587\u4ef6\r\n        //status\uff1a\u83b7\u53d6\u90a3\u4e9b\u72b6\u6001\u7684\u6587\u7ae0\uff0c0\uff1a\u4efb\u4f55\u72b6\u6001\uff0c1\uff1a\u65b0\u9ad8\uff0c2\uff1a\u5f52\u6863\uff0c3\uff1a\u7b49\u5f85\u591a\u5a92\u4f53\u6587\u4ef6\u8f6c\u6362\uff0c4\uff1a\u5546\u54c1\u4fc3\u9500\uff0c5\uff1a\u65b0\u54c1\u5546\u54c1\uff0c6\uff1a\u6d3b\u52a8\u4fc3\u9500\r\n        function returnArticles(columnID,range, currentPage,doSearchFlag,flag,ascdesc,auditflag) {\r\n            var columnID = searchForm.column.value;\r\n            var doSearchFlag = searchForm.searchFlag.value;\r\n            var flag = searchForm.flag.value;\r\n            var ascdesc = searchForm.ascdesc.value;\r\n            var currentPage = searchForm.pageno.value\r\n            var arttypeval = searchForm.arttype.value;\r\n\r\n            articlesInfoList(columnID,1,false,4,0,auditflag,null,null,null);\r\n        }\r\n\r\n        function WebEdit(columnID,range, currentPage,doSearchFlag,flag,ascdesc) {\r\n            var columnID = searchForm.column.value;\r\n            var doSearchFlag = searchForm.searchFlag.value;\r\n            var flag = searchForm.flag.value;\r\n            var ascdesc = searchForm.ascdesc.value;\r\n            var currentPage = searchForm.pageno.value\r\n            var arttypeval = searchForm.arttype.value;\r\n\r\n            var iWidth=window.screen.availWidth-100;                                                 //\u5f39\u51fa\u7a97\u53e3\u7684\u5bbd\u5ea6;\r\n            var iHeight=800;                                                //\u5f39\u51fa\u7a97\u53e3\u7684\u9ad8\u5ea6;\r\n            //var iTop = (window.screen.availHeight-30-iHeight)/2;        //\u83b7\u5f97\u7a97\u53e3\u7684\u5782\u76f4\u4f4d\u7f6e;\r\n            iTop = 0;\r\n            var iLeft = (window.screen.availWidth-10-iWidth)/2;         //\u83b7\u5f97\u7a97\u53e3\u7684\u6c34\u5e73\u4f4d\u7f6e;\r\n            window.open(\"../webedit/index.jsp?column=\" + columnID + \"&right=4\" + \"&range=\" + range + \"&start=\" + currentPage + \"&searchFlag=\" + doSearchFlag + \"&flag=\" + flag +\"&ascdesc=\" + ascdesc, \"WebEdit\", \"width=\" + iWidth + \",height=\" + iHeight + \",left=\" + iLeft + \",top=\" + iTop + \",status,scrollbars\");\r\n        }\r\n    </script>\r\n</head>\r\n<body class=\"layui-layout-body\">\r\n<div class=\"layui-layout layui-layout-admin\">\r\n    <div class=\"layui-header\">\r\n        <div class=\"layui-logo\"><a href=\"../index1.jsp\" class=\"layui-logo\">CMS-\u6587\u7ae0\u7ba1\u7406</a></div>\r\n        ".toCharArray();
    _jsp_string18 = "\r\n    </div>\r\n\r\n    <div class=\"layui-side layui-bg-black\" id=\"sidetreeid\" style=\"top: 60px;\">\r\n        <div id=\"treebox\" style=\"overflow-x:auto;\">\r\n            <ul id=\"mytree\"></ul>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"layui-body\">\r\n        <!-- \u5185\u5bb9\u4e3b\u4f53\u533a\u57df -->\r\n        <div id=\"maincontent\" class=\"location\" style=\"padding-bottom: 5px;display: none;\">\r\n            <div id=\"column_nameid\">\u6587\u7ae0\u7ba1\u7406 ></div>\r\n            <div style=\"padding-top: 10px;padding-bottom: 10px;\">\r\n                <form name=\"searchForm\">\r\n                    <input type=\"hidden\" name=\"column\" value=\"".toCharArray();
    _jsp_string3 = ";\r\n            var doSearchFlag = ".toCharArray();
    _jsp_string32 = ");'/></li>\r\n                    <li><input name=\"refer\" type=\"button\" value=\"\u5f15\u7528\" class=\"button_bg_1\" onclick='javascript:referArticle(".toCharArray();
    _jsp_string2 = ";\r\n            var currentPage = ".toCharArray();
    _jsp_string31 = ");'/></li>\r\n                    <li><input name=\"batchDel\" type=\"button\" value=\"\u6279\u91cf\u5220\u9664\" class=\"button_bg_3\" onclick='javascript:batchDel(".toCharArray();
    _jsp_string20 = "\">\r\n                    <input type=\"hidden\" name=\"flag\" value=\"".toCharArray();
    _jsp_string28 = ",1);'/></li>\r\n                    <li><input name=\"returnfile\" type=\"button\" value=\"\u9000\u7a3f\" class=\"button_bg_1\" onclick='javascript:returnArticles(".toCharArray();
    _jsp_string34 = ");'/></li>\r\n                    <li><input name=\"newFile\" type=\"button\" value=\"\u65b0\u5efa\" class=\"button_bg_1\" onclick='javascript:createArticle(".toCharArray();
    _jsp_string23 = "\">\r\n                    <input type=\"hidden\" name=\"right\" value=\"".toCharArray();
    _jsp_string4 = ";\r\n            var flag = ".toCharArray();
    _jsp_string26 = ",null,null,null,null);\" class=\"sear_btn\"/>\r\n                </form>\r\n            </div>\r\n            <div class=\"button_top\">\r\n                <ul>\r\n                    <li><input name=\"webedit\" type=\"button\" value=\"\u6587\u4ef6\u5939\u7ba1\u7406\" class=\"button_bg_2\" onclick='javascript:WebEdit(".toCharArray();
    _jsp_string24 = "\">\r\n                    \u6807\u9898\uff1a<input type=\"text\" name=\"title\" id=\"titleid\" value=\"\"  class=\"sear_txt_1\" />\r\n                    \u526f\u6807\u9898\uff1a<input type=\"text\" name=\"vicetitle\" id=\"vicetitleid\" value=\"\"  class=\"sear_txt_1\" />\r\n                    \u4f5c\u8005\uff1a<input type=\"text\" name=\"author\" id=\"authorid\" value=\"\"  class=\"sear_txt_1\" />\r\n                    \u6765\u6e90\uff1a<input type=\"text\" name=\"source\" id=\"sourceid\" value=\"\"  class=\"sear_txt_1\" />\r\n                    \u53d1\u5e03\u65e5\u671f\uff1a<input type=\"text\" name=\"spubdate\" id=\"sdate\" class=\"datetime_txt_1\" />\u5230\r\n                    <input type=\"text\" name=\"epubdate\" id=\"edate\" class=\"datetime_txt_1\" />\r\n                    \u6587\u7ae0ID\uff1a<input type=\"text\" name=\"articleid\" id=\"artid\" value=\"\"  class=\"sear_txt_1\" />\r\n                    \u72b6\u6001\uff1a<select name=\"arttype\" id=\"arttypeid\" class=\"sear_txt_1\"></select>\r\n                    <input type=\"button\" name=\"search\" id=\"searchid\" value=\"\u641c\u7d22\" onclick=\"javascript:articlesInfoList(".toCharArray();
    _jsp_string11 = "') {\r\n                            if (lockflag == 0) {              //\u6ca1\u6709\u9501\u5b9a\r\n                                if (emptyflag == 0) {        //\u975e\u4e0a\u4f20\u6587\u4ef6\uff0c\u5185\u5bb9\u4e0d\u4e3a\u7a7a\r\n                                    if ((referID > 0) || (!isown))\r\n                                        updateAction = \"&nbsp;\";\r\n                                    else {\r\n                                        if (auditflag == 0 || auditflag == 2)   //2\u662f\u9000\u7a3f\u72b6\u6001   0--\u4e0d\u9700\u8981\u5ba1\u6838\r\n                                            updateAction = \"<a href=javascript:editArticle(\" + rownum +  \",\" + jsondata.ARTICLES[ii].ID + \",\" + range + \",\" + currentPage + \",\" + doSearchFlag + \",\" + flag + \",\" + ascdesc + \",'c');><img src=\\\"../images/edit.png\\\" width=\\\"24\\\" height=\\\"23\\\" alt=\\\"\u7f16\u8f91\u6587\u7ae0\\\"></a>\";\r\n                                        else\r\n                                            updateAction = \"&nbsp;\";\r\n                                    }\r\n                                } else {                     //\u4e0a\u4f20\u6587\u4ef6\uff0c\u5185\u5bb9\u4e3a\u7a7a\r\n                                    if (auditflag == 0 || auditflag == 2)     //2\u662f\u9000\u7a3f\u72b6\u6001  0--\u4e0d\u9700\u8981\u5ba1\u6838\r\n                                        updateAction = \"<a href=javascript:edituploadfile(\" + jsondata.ARTICLES[ii].ID + \",\" + range + \",\" + currentPage + \",\" + doSearchFlag + \",\" + flag + \",\" + ascdesc + \",\" + \"'c')><img src=\\\"../images/edit.png\\\" width=\\\"24\\\" height=\\\"23\\\" alt=\\\"\u7f16\u8f91\u6587\u7ae0\\\"></a>\"\r\n                                    else\r\n                                        updateAction = \"&nbsp;\";\r\n                                }\r\n                            } else {\r\n                                if((referID > 0) || !isown)\r\n                                    updateAction = \"<img src=\\\"../images/button/lock.gif\\\" align=bottom border=0 alt=\\\"\u5df2\u88ab\u9501\u5b9a\\\">\";\r\n                                else\r\n                                    updateAction = \"<a href=javascript:editArticle(\" + rownum + \",\" + jsondata.ARTICLES[ii].ID + \",\" + range + \",\" + currentPage + \",\" + doSearchFlag + \",\" + flag + \",\" + ascdesc + \",'c');><img src=\\\"../images/edit.png\\\" width=\\\"24\\\" height=\\\"23\\\" alt=\\\"\u7f16\u8f91\u6587\u7ae0\\\"></a>\";\r\n                            }\r\n                        } else {\r\n                            if (lockflag!=0) {   //\u6ca1\u6709\u5199\u6743\u9650\uff0c\u4e5f\u5e76\u4e0d\u662f\u7f51\u7ad9\u7ba1\u7406\u5458\uff0c\u6587\u7ae0\u88ab\u5176\u4ed6\u7528\u6237\u9501\u5b9a\r\n                                updateAction = \"<img src=\\\"../images/button/lock.gif\\\" align=bottom border=0 alt=\\\"\u5df2\u88ab\u9501\u5b9a\\\">\";\r\n                            } else\r\n                                updateAction = \"&nbsp;\";\r\n                        }\r\n\r\n                        var deleteAction = \"\";\r\n                        if(writeRight || adminRight || deptDeleteRight || editor=='".toCharArray();
    _jsp_string6 = ";\r\n            if (columnid>0) articlesInfoList(columnid,currentPage,doSearchFlag,flag,ascdesc,null,null,null,null);\r\n        });\r\n\r\n        function goSearchPage(columnid,doSearchFlag,flag,ascdesc,auditflag,pubflag,mediatype,arttypeval) {\r\n            var currentPage = form.turnPage.value;\r\n            articlesInfoList(columnid,currentPage,doSearchFlag,flag,ascdesc,auditflag,pubflag,mediatype,arttypeval);\r\n            form.turnPage.value = currentPage;\r\n        }\r\n\r\n        function Pagination(totalArticleNum,columnid,totalpages,curentpage,pageNumLength,doSearchFlag,flag,ascdesc,auditflag,pubflag,mediatype,arttypeval) {\r\n            var PaginationDiv = \"\";\r\n            if (totalpages <= 1)\r\n                PaginationDiv = \"<div class=\\\"page\\\" style=\\\"display: none\\\">\";\r\n            else\r\n                PaginationDiv = \"<div class=\\\"page\\\" style=\\\"display: block\\\">\";\r\n\r\n            if (curentpage<=1)\r\n                PaginationDiv = PaginationDiv + \"<span class=\\\"txtl\\\">\u5f53\u524d\u680f\u76ee\u7684\u6587\u7ae0\u603b\u6570\uff1a\" + totalArticleNum + \"</span><span>\u7b2c1\u9875</span>\";\r\n            else {\r\n                PaginationDiv = PaginationDiv + \"<span class=\\\"txtl\\\">\u5f53\u524d\u680f\u76ee\u7684\u6587\u7ae0\u603b\u6570\uff1a\" + totalArticleNum + \"</span><a href=\\\"javascript:articlesInfoList(\" + columnid + \",1,\" + flag + \",\" + ascdesc + \",\"+ auditflag + \",\" + pubflag + \",\" + mediatype + \",\" + arttypeval + \");\\\">\u7b2c1\u9875</a>\";\r\n            }\r\n\r\n            PaginationDiv = PaginationDiv + \"<span>\u5171\" + totalpages + \"\u9875</span>\";\r\n\r\n            if (curentpage<=1)\r\n                PaginationDiv = PaginationDiv + \"<span>\u4e0a\u4e00\u9875</span>\";\r\n            else {\r\n                PaginationDiv = PaginationDiv + \"<a href=\\\"javascript:articlesInfoList(\" + columnid + \",\" + (curentpage - 1) + \",\"+ doSearchFlag + \",\" + flag + \",\" + ascdesc + \",\"+ auditflag + \",\" + pubflag + \",\" + mediatype + \",\" + arttypeval + \");\\\">\u4e0a\u4e00\u9875</a>\";\r\n            }\r\n\r\n            var half_pageNumLength = parseInt(pageNumLength/2);\r\n            var startPageNum=0;\r\n            var endPageNum = 0;\r\n            if (curentpage<=half_pageNumLength)\r\n                startPageNum=0;\r\n            else {\r\n                startPageNum = parseInt(curentpage) - parseInt(half_pageNumLength);\r\n                if (startPageNum<=0) startPageNum = 0;\r\n            }\r\n\r\n            if (curentpage<half_pageNumLength) {\r\n                if (totalpages <= pageNumLength)\r\n                    endPageNum = totalpages;\r\n                else\r\n                    endPageNum = pageNumLength;\r\n            } else {\r\n                if (totalpages <= pageNumLength)\r\n                    endPageNum = totalpages;\r\n                else {\r\n                    endPageNum = parseInt(curentpage) + parseInt(half_pageNumLength);\r\n                    if (endPageNum>totalpages) endPageNum = totalpages;\r\n                }\r\n            }\r\n\r\n            for(var ii=startPageNum;ii<endPageNum;ii++) {\r\n                if ((ii + 1) === curentpage)\r\n                    PaginationDiv = PaginationDiv + \"<span class=\\\"cur\\\">\" + curentpage + \"</span>\";\r\n                else {\r\n                    PaginationDiv = PaginationDiv + \"<a href=\\\"javascript:articlesInfoList(\" + columnid + \",\" + (ii + 1) + \",\" + doSearchFlag + \",\" + flag + \",\" + ascdesc + \",\"+ auditflag + \",\" + pubflag + \",\" + mediatype + \",\" + arttypeval + \");\\\">\" + (ii + 1) + \"</a>\";\r\n                }\r\n            }\r\n\r\n            if (curentpage<totalpages)\r\n                PaginationDiv = PaginationDiv + \"<a href=\\\"javascript:articlesInfoList(\" + columnid + \",\" + (curentpage+1) + \",\" + doSearchFlag + \",\" + flag + \",\" + ascdesc + \",\"+ auditflag + \",\" + pubflag + \",\" + mediatype + \",\" + arttypeval + \");\\\">\u4e0b\u4e00\u9875</a>\";\r\n            else\r\n                PaginationDiv = PaginationDiv + \"<span>\u4e0b\u4e00\u9875</span>\";\r\n\r\n            PaginationDiv = PaginationDiv + \"<span class=\\\"txtl\\\">\u8f6c\u5230\u7b2c</span>\";\r\n            PaginationDiv = PaginationDiv + \"<span class=\\\"select-pager\\\">\";\r\n            PaginationDiv = PaginationDiv + \"<form name=\\\"form\\\">\";\r\n\r\n            PaginationDiv = PaginationDiv + \"<select name=\\\"turnPage\\\" size=\\\"1\\\" onchange=\\\"javascript:goSearchPage(\" + columnid + \",'\" + doSearchFlag + \"',\" + flag + \",\" + ascdesc + \",\"+ auditflag + \",\" + pubflag + \",\" + mediatype + \",\" + arttypeval + \");\\\">\";\r\n\r\n            for(var ii=0;ii<totalpages;ii++) {\r\n                if ((ii+1) === curentpage)\r\n                    PaginationDiv = PaginationDiv + \"<option value=\\\"\" + (ii+1) + \"\\\" selected>\" + (ii+1) +  \"</option>\";\r\n                else\r\n                    PaginationDiv = PaginationDiv + \"<option value=\\\"\" + (ii+1) + \"\\\">\" + (ii+1) + \"</option>\";\r\n            }\r\n\r\n            PaginationDiv = PaginationDiv + \"</select>\";\r\n            PaginationDiv = PaginationDiv + \"</form>\";\r\n            PaginationDiv = PaginationDiv + \"</span>\";\r\n            PaginationDiv = PaginationDiv + \"<span class=\\\"txtr\\\">\u9875</span>\";\r\n            PaginationDiv = PaginationDiv + \"</div>\";\r\n\r\n            return PaginationDiv;\r\n        }\r\n\r\n        //columnid:\u83b7\u53d6\u8be5\u680f\u76ee\u7684\u6587\u7ae0\u5217\u8868\r\n        //currentPage:\u5f53\u524d\u9875\u53f7\r\n        //doSearchFlag\uff1a\u662f\u5426\u6267\u884c\u68c0\u7d22\u529f\u80fd\r\n        //flag:\u8bbe\u7f6e\u6392\u5e8f\u5b57\u6bb5\r\n        //ascdesc\uff1a\u5347\u5e8f\u6392\u5217\u8fd8\u662f\u964d\u5e8f\u6392\u5217\uff0c0\u5347\u5e8f\u6392\u5217\uff0c1\u964d\u5e8f\u6392\u5217\r\n        //auditflag\uff1a\u6587\u7ae0\u5ba1\u6838\u72b6\u6001\r\n        //pubflag\uff1a\u6587\u7ae0\u662f\u5426\u88ab\u53d1\u5e03\r\n        //mediatype\uff1a\u591a\u5a92\u4f53\u6587\u4ef6\r\n        //arttypeval\uff1a\u83b7\u53d6\u90a3\u4e9b\u72b6\u6001\u7684\u6587\u7ae0\uff0c0\uff1a\u4efb\u4f55\u72b6\u6001\uff0c1\uff1a\u65b0\u9ad8\uff0c2\uff1a\u5f52\u6863\uff0c3\uff1a\u7b49\u5f85\u591a\u5a92\u4f53\u6587\u4ef6\u8f6c\u6362\uff0c4\uff1a\u5546\u54c1\u4fc3\u9500\uff0c5\uff1a\u65b0\u54c1\u5546\u54c1\uff0c6\uff1a\u6d3b\u52a8\u4fc3\u9500\r\n        function articlesInfoList(columnid,currentPage,doSearchFlag,flag,ascdesc,auditflag,pubflag,mediatype,arttypeval) {\r\n            var range = 20;\r\n            var title = \"\";\r\n            var articleid = \"\";\r\n            var vicetitle = \"\";\r\n            var author = \"\";\r\n            var source = \"\";\r\n            var spubdate = \"\";\r\n            var epubdate = \"\";\r\n\r\n            if (doSearchFlag) {\r\n                title = searchForm.title.value;\r\n                articleid = searchForm.articleid.value;\r\n                vicetitle = searchForm.vicetitle.value;\r\n                author = searchForm.author.value;\r\n                source = searchForm.source.value;\r\n                spubdate = searchForm.spubdate.value;\r\n                epubdate = searchForm.epubdate.value;\r\n                arttypeval = searchForm.arttype.value;\r\n                columnid = searchForm.column.value;\r\n            }\r\n\r\n            var rightid=searchForm.right.value;\r\n            htmlobj=$.ajax({\r\n                url:\"../article/articlesnew.jsp\",\r\n                data:{\r\n                    doSearch:doSearchFlag,\r\n                    page:currentPage,\r\n                    title:encodeURIComponent(title),\r\n                    articleid:articleid,\r\n                    vicetitle:encodeURIComponent(vicetitle),\r\n                    author:encodeURIComponent(author),\r\n                    source:encodeURIComponent(source),\r\n                    spubdate:encodeURIComponent(spubdate),\r\n                    epubdate:encodeURIComponent(epubdate),\r\n                    arttype:arttypeval,\r\n                    column:columnid,\r\n                    range:range,\r\n                    flag:flag,\r\n                    ascdesc:ascdesc,\r\n                    audit:auditflag,            //\u67e5\u8be2\u5f85\u5ba1\u7a3f\u4ef6\u548c\u9000\u56de\u7684\u7a3f\u4ef6\r\n                    pubflag:pubflag,\r\n                    mediatype:mediatype,\r\n                    right:rightid\r\n                },\r\n                dataType:'json',\r\n                async:false,\r\n                success:function(jsondata){\r\n                    var writeRight = jsondata.WRITERIGHT;\r\n                    var publishRight = jsondata.PUBLISHRIGHT;\r\n                    var publishMyRight = jsondata.PUBLISHMYRIGHT;\r\n                    var adminRight = jsondata.ADMINRIGHT;\r\n                    var deptWriteRight = jsondata.DEPTWRITERIGHT;\r\n                    var deptReadRight = jsondata.DEPTREADRIGHT;\r\n                    var deptDeleteRight = jsondata.DEPTDELETERIGHT;\r\n                    var deptPublishRight = jsondata.DEPTPULISHRIGHT;\r\n                    var searchflag = jsondata.DOSEARCH;\r\n                    var articleIds = \"\";\r\n                    range = jsondata.RANGE;\r\n                    var extra = jsondata.TOTALCOUNT % range;\r\n                    var totalPage = 0;\r\n                    if (extra>0)\r\n                        totalPage = parseInt(jsondata.TOTALCOUNT/range) + 1;\r\n                    else\r\n ".toCharArray();
    _jsp_string27 = ");'/></li>\r\n                    <!--li><input name=\"auditfile\" type=\"button\" value=\"\u5728\u5ba1\" class=\"button_bg_1\" onclick='javascript:auditArticles(".toCharArray();
    _jsp_string12 = "')\r\n                            if (auditflag == 0) {\r\n                                if (!isown)\r\n                                    deleteAction = \"<a href=\\\"javascript:removeRefersArticle(\" + rownum + \",\" + jsondata.ARTICLES[ii].ID +\",\" + currentPage + \",\" + flag + \",\" + ascdesc + \",\" + range +  \",'a');\\\"><img src=\\\"../images/del.png\\\" width=\\\"23\\\" height=\\\"23\\\" alt=\\\"\u5220\u9664\u6587\u7ae0\\\"/></a>\";\r\n                                else\r\n                                    deleteAction = \"<a href=\\\"javascript:removeArticle(\" + rownum + \",\" + jsondata.ARTICLES[ii].ID +\",\" + currentPage + \",\" + flag + \",\" + ascdesc + \",\" + range +  \",'a');\\\"><img src=\\\"../images/del.png\\\" width=\\\"23\\\" height=\\\"23\\\" alt=\\\"\u5220\u9664\u6587\u7ae0\\\"/></a>\";\r\n                            } else {\r\n                                deleteAction = \"&nbsp;\";\r\n                            }\r\n                        else\r\n                            deleteAction = \"&nbsp;\";\r\n\r\n                        var headlineAction = \"<a href=\\\"javascript:headlineArticle(\" + jsondata.ARTICLES[ii].ID + \",\" + currentPage + \",\" + flag + \",\" + ascdesc + \",\" + range + \",'a');\\\"><img src=\\\"../images/give.png\\\" width=\\\"23\\\" height=\\\"23\\\" /></a>\";\r\n\r\n                        var pushAction = \"\";\r\n                        if(writeRight || adminRight || deptWriteRight || editor=='".toCharArray();
    _jsp_string21 = "\">\r\n                    <input type=\"hidden\" name=\"ascdesc\" value=\"".toCharArray();
    _jsp_string0 = "\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n".toCharArray();
    _jsp_string1 = "\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <meta charset=\"utf-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1\">\r\n    <title>\u7f51\u7ad9\u5185\u5bb9\u7ba1\u7406\u7cfb\u7edf--\u6587\u7ae0\u7ba1\u7406</title>\r\n    <link rel=\"stylesheet\" href=\"../css/cms_css.css\">\r\n    <link rel=\"stylesheet\" href=\"../design/css/layui.css\">\r\n    <link rel=\"stylesheet\" href=\"../css/jquery.msgbox.css\" type=\"text/css\" />\r\n    <script type=\"text/javascript\" src=\"../js/jquery-1.12.4.js\"></script>\r\n    <script type=\"text/javascript\" src=\"../js/jquery.msgbox.min.js\"></script>\r\n    <script type=\"text/javascript\" src=\"../js/json2.js\"></script>\r\n    <script type=\"text/javascript\" src=\"../design/layui.js\"></script>\r\n\r\n    <!--\u5f15\u7528xtree-->\r\n    <script type=\"text/javascript\" src=\"../design/layui-xtree.js\"></script>\r\n    <script>\r\n        $(document).ready(function(){\r\n            var columnid = ".toCharArray();
    _jsp_string36 = "\r\n</div>\r\n<script>\r\n    layui.use(['element', 'tree', 'laydate'], function(){\r\n        var $ = layui.jquery;\r\n        //\u6dfb\u52a0\u9009\u4e2d\u989c\u8272\u663e\u793a\r\n        $(\"body\").on(\"mousedown\", \".layui-tree a\", function() {\r\n            if(!$(this).siblings('ul').length) {\r\n                $(\".layui-tree a\").removeClass('active');\r\n                $(this).find('cite').parent().addClass('active');\r\n            }\r\n        });\r\n\r\n        var tree = layui.tree;\r\n        var inst1 = tree.render({\r\n            elem: '#mytree', //\u6307\u5b9a\u5143\u7d20\r\n            showLine:true,\r\n            onlyIconControl:true,\r\n            //skin: 'sidebar',\r\n            skin: 'dx',\r\n            target: '_blank', //\u662f\u5426\u65b0\u9009\u9879\u5361\u6253\u5f00\uff08\u6bd4\u5982\u8282\u70b9\u8fd4\u56dehref\u624d\u6709\u6548\uff09\r\n            click: function(item){ //\u70b9\u51fb\u8282\u70b9\u56de\u8c03\r\n                //columnid:\u83b7\u53d6\u8be5\u680f\u76ee\u7684\u6587\u7ae0\u5217\u8868\r\n                //currentPage:\u5f53\u524d\u9875\u53f7\r\n                //doSearchFlag\uff1a\u662f\u5426\u6267\u884c\u68c0\u7d22\u529f\u80fd\r\n                //flag:\u8bbe\u7f6e\u6392\u5e8f\u5b57\u6bb5\r\n                //ascdesc\uff1a\u5347\u5e8f\u6392\u5217\u8fd8\u662f\u964d\u5e8f\u6392\u5217\uff0c0\u5347\u5e8f\u6392\u5217\uff0c1\u964d\u5e8f\u6392\u5217\r\n                //auditflag\uff1a\u6587\u7ae0\u5ba1\u6838\u72b6\u6001\r\n                //pubflag\uff1a\u6587\u7ae0\u662f\u5426\u88ab\u53d1\u5e03\r\n                //mediatype\uff1a\u591a\u5a92\u4f53\u6587\u4ef6\r\n                //status\uff1a\u83b7\u53d6\u90a3\u4e9b\u72b6\u6001\u7684\u6587\u7ae0\uff0c0\uff1a\u4efb\u4f55\u72b6\u6001\uff0c1\uff1a\u65b0\u9ad8\uff0c2\uff1a\u5f52\u6863\uff0c3\uff1a\u7b49\u5f85\u591a\u5a92\u4f53\u6587\u4ef6\u8f6c\u6362\uff0c4\uff1a\u5546\u54c1\u4fc3\u9500\uff0c5\uff1a\u65b0\u54c1\u5546\u54c1\uff0c6\uff1a\u6d3b\u52a8\u4fc3\u9500\r\n                articlesInfoList(item.data.id,1,false,4,0,null,null,null,0);\r\n                $(\"#maincontent\").css(\"display\",\"block\");\r\n                //layer.msg('\u5f53\u524d\u8282\u540d\u79f0\uff1a'+ item.data.title + \"==\" + item.data.id + '<br>\u5168\u90e8\u53c2\u6570\uff1a'+ JSON.stringify(item));\r\n                //console.log(item);\r\n            },\r\n            data:".toCharArray();
    _jsp_string30 = ");'/></li>\r\n                    <li><input name=\"batchUnuse\" type=\"button\" value=\"\u6279\u91cf\u672a\u7528\" class=\"button_bg_3\" onclick='javascript:doUnuse(".toCharArray();
    _jsp_string15 = "           success:function(jsondata){\r\n                    if (jsondata.ERRCODE == 0) {\r\n                        articlesInfoList(columnID,currentPage,doSearchFlag,flag,ascdesc,null,null,null,arttypeval);\r\n                        layer.alert('\u5f15\u7528\u6587\u7ae0\u5220\u9664\u6210\u529f\uff01\uff01\uff01')\r\n                    } else {\r\n                        layer.alert('\u5f15\u7528\u6587\u7ae0\u5220\u9664\u5931\u8d25\uff01\uff01\uff01');\r\n                    }\r\n                },\r\n                error: function (jqXHR, textStatus, errorThrown) {\r\n                    alert(jqXHR.responseText);\r\n                    alert(jqXHR.status);\r\n                    alert(jqXHR.readyState);\r\n                    alert(jqXHR.statusText);\r\n                    alert(textStatus);\r\n                    alert(errorThrown);\r\n                }\r\n            });\r\n        }\r\n\r\n        function pushArticle(articleID, currentPage,flag,ascdesc,range,from) {\r\n            var iWidth=800;                                                 //\u5f39\u51fa\u7a97\u53e3\u7684\u5bbd\u5ea6;\r\n            var iHeight=600;                                                //\u5f39\u51fa\u7a97\u53e3\u7684\u9ad8\u5ea6;\r\n            var iTop = (window.screen.availHeight-30-iHeight)/2;        //\u83b7\u5f97\u7a97\u53e3\u7684\u5782\u76f4\u4f4d\u7f6e;\r\n            var iLeft = (window.screen.availWidth-10-iWidth)/2;         //\u83b7\u5f97\u7a97\u53e3\u7684\u6c34\u5e73\u4f4d\u7f6e;\r\n            window.open(\"addRelateListnew.jsp?articleid=\" + articleID + \"&start=\" + currentPage + \"&range=\" + range + \"&fromflag=a\", \"\", \"width=\" + iWidth + \",height=\" + iHeight + \",top=\" + iTop + \", left=\" + iLeft + \", toolbar=no, menubar=no, resizable=no,location=no, status=no\");\r\n        }\r\n\r\n        function edituploadfile(articleID, range, currentPage,doSearchFlag,flag,ascdesc,from) {\r\n            var columnID = searchForm.column.value;\r\n            var arttypeval = searchForm.arttype.value;\r\n\r\n            var iWidth=window.screen.availWidth-100;                                                 //\u5f39\u51fa\u7a97\u53e3\u7684\u5bbd\u5ea6;\r\n            var iHeight=800;                                                //\u5f39\u51fa\u7a97\u53e3\u7684\u9ad8\u5ea6;\r\n            //var iTop = (window.screen.availHeight-30-iHeight)/2;        //\u83b7\u5f97\u7a97\u53e3\u7684\u5782\u76f4\u4f4d\u7f6e;\r\n            iTop = 0;\r\n            var iLeft = (window.screen.availWidth-10-iWidth)/2;         //\u83b7\u5f97\u7a97\u53e3\u7684\u6c34\u5e73\u4f4d\u7f6e;\r\n            window.open(\"../upload/edituploadfile.jsp?article=\" + articleID + \"&range=\" + range + \"&start=\" + currentPage + \"&searchFlag=\" + doSearchFlag + \"&flag=\" + flag + \"&ascdesc=\" + ascdesc  + \"&fromflag=\" + from + \"&arttype=\" + arttypeval, \"\", \"width=\" + iWidth + \",height=\" + iHeight + \",left=\" + iLeft + \",top=\" + iTop + \",status,scrollbars\");\r\n        }\r\n\r\n        function publish(rownum,columnID,articleID, range, start,doSearchFlag,flag,ascdesc,source,isown) {\r\n            htmlobj=$.ajax({\r\n                url:\"../publish/publishnew.jsp\",\r\n                timeout:0,\r\n                data:{\r\n                    column:columnID,\r\n                    article:articleID,\r\n                    range:range,\r\n                    start:start,\r\n                    searchFlag:doSearchFlag,\r\n                    flag:flag,\r\n                    ascdesc:ascdesc,\r\n                    source:source,\r\n                    isown:isown\r\n                },\r\n                dataType:'json',\r\n                async:false,\r\n                success:function(jsondata){\r\n                    if (jsondata.result == \"true\") {\r\n                        var tb = document.getElementById('articleDataGrid');\r\n                        tb.rows[rownum + 1].cells[1].innerHTML = \"<img src=\\\"../images/button/yi.gif\\\" border=0 alt=\\\"\u5df2\u53d1\u5e03\\\">\";\r\n                        layer.alert('\u6587\u7ae0\u53d1\u5e03\u6210\u529f\uff01\uff01\uff01')\r\n                    } else {\r\n                        layer.alert('\u6587\u7ae0\u53d1\u5e03\u5931\u8d25\uff01\uff01\uff01');\r\n                    }\r\n                },\r\n                error: function (jqXHR, textStatus, errorThrown) {\r\n                    if(textStatus==\"timeout\"){\r\n                        alert(\"\u52a0\u8f7d\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\");\r\n                    }else{\r\n                        alert(textStatus);\r\n                    }\r\n                    alert(jqXHR.responseText);\r\n                    alert(jqXHR.status);\r\n                    alert(jqXHR.readyState);\r\n                    alert(jqXHR.statusText);\r\n                    alert(textStatus);\r\n                    alert(errorThrown);\r\n                },\r\n                complete: function (XMLHttpRequest,status) {\r\n                    if(status == 'timeout') {\r\n                        alert(\"hello word\");\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        function Preview(articleID, columnId) {\r\n            var columnId = searchForm.column.value;\r\n            var iWidth=window.screen.availWidth-100;                                                 //\u5f39\u51fa\u7a97\u53e3\u7684\u5bbd\u5ea6;\r\n            var iHeight=800;                                                //\u5f39\u51fa\u7a97\u53e3\u7684\u9ad8\u5ea6;\r\n            //var iTop = (window.screen.availHeight-30-iHeight)/2;        //\u83b7\u5f97\u7a97\u53e3\u7684\u5782\u76f4\u4f4d\u7f6e;\r\n            iTop = 0;\r\n            var iLeft = (window.screen.availWidth-10-iWidth)/2;         //\u83b7\u5f97\u7a97\u53e3\u7684\u6c34\u5e73\u4f4d\u7f6e;\r\n            window.open(\"preview.jsp?article=\" + articleID + \"&column=\" + columnId, \"Preview\", \"width=\" + iWidth + \",height=\" + iHeight + \",left=\" + iLeft + \",top=\" + iTop + \",status,scrollbars\");\r\n        }\r\n\r\n        function CA() {\r\n            for (var i = 0; i < document.form1.elements.length; i++) {\r\n                var e = document.form1.elements[i];\r\n                if (e.name != 'allbox' && e.type == 'checkbox') {\r\n                    e.checked = document.form1.allbox.checked;\r\n                }\r\n            }\r\n        }\r\n\r\n        function createArticle(columnID,range, currentPage,doSearchFlag,flag,ascdesc) {\r\n            var columnID = searchForm.column.value;\r\n            var doSearchFlag = searchForm.searchFlag.value;\r\n            flag = searchForm.flag.value;\r\n            ascdesc = searchForm.ascdesc.value;\r\n            currentPage = searchForm.pageno.value;\r\n\r\n            var arttypeval = searchForm.arttype.value;\r\n            var iWidth=window.screen.availWidth-100;                                                 //\u5f39\u51fa\u7a97\u53e3\u7684\u5bbd\u5ea6;\r\n            var iHeight=800;                                                //\u5f39\u51fa\u7a97\u53e3\u7684\u9ad8\u5ea6;\r\n            //var iTop = (window.screen.availHeight-30-iHeight)/2;        //\u83b7\u5f97\u7a97\u53e3\u7684\u5782\u76f4\u4f4d\u7f6e;\r\n            iTop = 0;\r\n            var iLeft = (window.screen.availWidth-10-iWidth)/2;         //\u83b7\u5f97\u7a97\u53e3\u7684\u6c34\u5e73\u4f4d\u7f6e;\r\n            window.open(\"createarticle.jsp?column=\" + columnID + \"&range=\" + range + \"&start=\" + currentPage + \"&searchFlag=\" + doSearchFlag + \"&flag=\" + flag +\"&ascdesc=\" + ascdesc + \"arttype=\" + arttypeval, \"CreateWin\", \"width=\" + iWidth + \",height=\" + iHeight + \",left=\" + iLeft + \",top=\" + iTop + \",status,scrollbars\");\r\n        }\r\n\r\n        function createuploadfile(columnID,range, currentPage,doSearchFlag,flag,ascdesc) {\r\n            var columnID = searchForm.column.value;\r\n            var doSearchFlag = searchForm.searchFlag.value;\r\n            var flag = searchForm.flag.value;\r\n            var ascdesc = searchForm.ascdesc.value;\r\n            var currentPage = searchForm.pageno.value\r\n            var arttypeval = searchForm.arttype.value;\r\n\r\n            var iWidth=window.screen.availWidth-100;                                                 //\u5f39\u51fa\u7a97\u53e3\u7684\u5bbd\u5ea6;\r\n            var iHeight=800;                                                //\u5f39\u51fa\u7a97\u53e3\u7684\u9ad8\u5ea6;\r\n            //var iTop = (window.screen.availHeight-30-iHeight)/2;        //\u83b7\u5f97\u7a97\u53e3\u7684\u5782\u76f4\u4f4d\u7f6e;\r\n            iTop = 0;\r\n            var iLeft = (window.screen.availWidth-10-iWidth)/2;         //\u83b7\u5f97\u7a97\u53e3\u7684\u6c34\u5e73\u4f4d\u7f6e;\r\n            window.open(\"../upload/createuploadfile.jsp?column=\" + columnID+ \"&range=\" + range + \"&start=\" + currentPage + \"&searchFlag=\" + doSearchFlag + \"&flag=\" + flag +\"&ascdesc=\" + ascdesc + \"&arttype=\" + arttypeval, \"UpdateWin\", \"width=\" + iWidth + \",height=\" + iHeight + \",left=\" + iLeft + \",top=\" + iTop + \",status,scrollbars\");\r\n        }\r\n\r\n        function referArticle(columnID,range, currentPage,doSearchFlag,flag,ascdesc) {\r\n            var columnID = searchForm.column.value;\r\n            var doSearchFlag = searchForm.searchFlag.value;\r\n            var flag = searchForm.flag.value;\r\n            var ascdesc = searchForm.ascdesc.value;\r\n            var currentPage = searchForm.pageno.value\r\n            var arttypeval = searchForm.arttype.value;\r\n\r\n            var iWidth=window.screen.availWidth-100;               ".toCharArray();
    _jsp_string29 = ",2);'/></li-->\r\n                    <li><input name=\"updateRss\" type=\"button\" value=\"\u66f4\u65b0RSS\" class=\"button_bg_3\" onclick='javascript:updateRSS();'/></li>\r\n                    <li><input name=\"batchAchive\" type=\"button\" value=\"\u6279\u91cf\u5f52\u6863\" class=\"button_bg_3\" onclick='javascript:doAchive(".toCharArray();
    _jsp_string16 = "                                  //\u5f39\u51fa\u7a97\u53e3\u7684\u5bbd\u5ea6;\r\n            var iHeight=800;                                                //\u5f39\u51fa\u7a97\u53e3\u7684\u9ad8\u5ea6;\r\n            //var iTop = (window.screen.availHeight-30-iHeight)/2;        //\u83b7\u5f97\u7a97\u53e3\u7684\u5782\u76f4\u4f4d\u7f6e;\r\n            iTop = 0;\r\n            var iLeft = (window.screen.availWidth-10-iWidth)/2;         //\u83b7\u5f97\u7a97\u53e3\u7684\u6c34\u5e73\u4f4d\u7f6e;\r\n            window.open(\"referarticle.jsp?column=\" + columnID + \"&range=\" + range + \"&start=\"+currentPage + \"&searchFlag=\" + doSearchFlag + \"&flag=\"+flag + \"&ascdesc=\"+ascdesc, \"\", \"width=\" + iWidth + \",height=\" + iHeight + \",left=\" + iLeft + \",top=\" + iTop + \",status,scrollbars\");\r\n        }\r\n\r\n        function updateRSS() {\r\n            var columnID = searchForm.column.value;\r\n            var doSearchFlag = searchForm.searchFlag.value;\r\n            var flag = searchForm.flag.value;\r\n            var ascdesc = searchForm.ascdesc.value;\r\n            var currentPage = searchForm.pageno.value\r\n            var arttypeval = searchForm.arttype.value;\r\n\r\n            var allArticleIds = form1.allArticleIds.value;\r\n            var selArticleIds = \"\";\r\n            $.each($('input:checkbox:checked'),function(){\r\n                selArticleIds = selArticleIds + $(this).val() + \",\";\r\n            });\r\n\r\n            if (selArticleIds.length>0) selArticleIds = selArticleIds.substring(0,selArticleIds.length-1);\r\n            if (selArticleIds.length==0) {\r\n                layer.alert('\u8bf7\u9009\u62e9\u9700\u8981\u8bbe\u7f6eRSS\u7684\u6587\u7ae0\uff01\uff01\uff01')\r\n            } else\r\n                htmlobj=$.ajax({\r\n                    url:\"doArticleRSS.jsp\",\r\n                    data:{\r\n                        allArticleIds:allArticleIds,\r\n                        article:selArticleIds\r\n                    },\r\n                    dataType:'json',\r\n                    async:false,\r\n                    success:function(jsondata){\r\n                        var tb = document.getElementById('articleDataGrid');\r\n                        if (jsondata.ERRCODE == 0) {\r\n                            var articleids= new Array();      //\u5b9a\u4e49\u4e00\u6570\u7ec4\r\n                            articleids=selArticleIds.split(\",\");        //\u5b57\u7b26\u5206\u5272\r\n                            for(var ii=0; ii<articleids.length; ii++) {\r\n                                var tr = document.getElementById('row' + articleids[ii]);\r\n                                tr.cells[2].innerHTML = \"R\";\r\n                            }\r\n                        }\r\n                    },\r\n                    error: function (jqXHR, textStatus, errorThrown) {\r\n                        alert(jqXHR.responseText);\r\n                        alert(jqXHR.status);\r\n                        alert(jqXHR.readyState);\r\n                        alert(jqXHR.statusText);\r\n                        alert(textStatus);\r\n                        alert(errorThrown);\r\n                    }\r\n                });\r\n        }\r\n\r\n        function batchDel(columnID,range, currentPage,doSearchFlag,flag,ascdesc) {\r\n            var columnID = searchForm.column.value;\r\n            var doSearchFlag = searchForm.searchFlag.value;\r\n            var flag = searchForm.flag.value;\r\n            var ascdesc = searchForm.ascdesc.value;\r\n            var currentPage = searchForm.pageno.value\r\n            var arttypeval = searchForm.arttype.value;\r\n\r\n            var selArticleIds = \"\";\r\n            $('input:checkbox[name=article]:checked').each(function(i) {\r\n                selArticleIds = selArticleIds + $(this).val() + \",\";\r\n            });\r\n\r\n            if (selArticleIds.length>0) selArticleIds = selArticleIds.substring(0,selArticleIds.length-1);\r\n\r\n            if (selArticleIds.length==0) {\r\n                layer.alert('\u8bf7\u9009\u62e9\u9700\u8981\u5220\u9664\u7684\u6587\u7ae0\uff01\uff01\uff01')\r\n            } else\r\n                htmlobj=$.ajax({\r\n                    url:\"batchDel.jsp\",\r\n                    data:{\r\n                        article:selArticleIds\r\n                    },\r\n                    dataType:'json',\r\n                    async:false,\r\n                    success:function(jsondata){\r\n                        var tb = document.getElementById('articleDataGrid');\r\n                        if (jsondata.ERRCODE == 0) {\r\n                            //var articleids= new Array();      //\u5b9a\u4e49\u4e00\u6570\u7ec4\r\n                            //articleids=selArticleIds.split(\",\");        //\u5b57\u7b26\u5206\u5272\r\n                            //for(var ii=0; ii<articleids.length; ii++) {\r\n                            //    var tr = document.getElementById('row' + articleids[ii]);\r\n                            //    tr.parentNode.removeChild(tr);\r\n                                //tb.deleteRow(rownum+1);                //table\u5bf9\u8c61\u6839\u636e\u884c\u53f7\u5220\u9664\u8868\u683c\u4e2d\u7684\u884c\r\n                            //}\r\n                            layer.alert('\u6587\u7ae0\u5220\u9664\u6210\u529f\uff01\uff01\uff01')\r\n                            articlesInfoList(columnID,currentPage,doSearchFlag,flag,ascdesc,null,null,null,arttypeval);\r\n                        } else {\r\n                            layer.alert('\u6587\u7ae0\u5220\u9664\u5931\u8d25\uff01\uff01\uff01')\r\n                        }\r\n                    },\r\n                    error: function (jqXHR, textStatus, errorThrown) {\r\n                        alert(jqXHR.responseText);\r\n                        alert(jqXHR.status);\r\n                        alert(jqXHR.readyState);\r\n                        alert(jqXHR.statusText);\r\n                        alert(textStatus);\r\n                        alert(errorThrown);\r\n                    }\r\n                });\r\n        }\r\n\r\n        function doAchive(columnID,range, currentPage,doSearchFlag,flag,ascdesc) {\r\n            var columnID = searchForm.column.value;\r\n            var doSearchFlag = searchForm.searchFlag.value;\r\n            var flag = searchForm.flag.value;\r\n            var ascdesc = searchForm.ascdesc.value;\r\n            var currentPage = searchForm.pageno.value\r\n            var arttypeval = searchForm.arttype.value;\r\n\r\n            var selArticleIds = \"\";\r\n            $('input:checkbox[name=article]:checked').each(function(i) {\r\n                selArticleIds = selArticleIds + $(this).val() + \",\";\r\n            });\r\n\r\n            if (selArticleIds.length>0) selArticleIds = selArticleIds.substring(0,selArticleIds.length-1);\r\n            if (selArticleIds.length==0) {\r\n                layer.alert('\u8bf7\u9009\u62e9\u9700\u8981\u5f52\u6863\u7684\u6587\u7ae0\uff01\uff01\uff01')\r\n            } else\r\n                htmlobj=$.ajax({\r\n                    url:\"batchAchive.jsp\",\r\n                    data:{\r\n                        column:columnID,\r\n                        articles:selArticleIds\r\n                    },\r\n                    dataType:'json',\r\n                    async:false,\r\n                    success:function(jsondata){\r\n                        var tb = document.getElementById('articleDataGrid');\r\n                        if (jsondata.ERRCODE == 0) {\r\n                            var articleids= new Array();      //\u5b9a\u4e49\u4e00\u6570\u7ec4\r\n                            articleids=selArticleIds.split(\",\");        //\u5b57\u7b26\u5206\u5272\r\n                            for(var ii=0; ii<articleids.length; ii++) {\r\n                                var tr = document.getElementById('row' + articleids[ii]);\r\n                                tr.cells[1].innerHTML = \"<img src=\\\"../images/button/dang.gif\\\" border=0 alt=\\\"\u5f52\u6863\\\">\";\r\n                            }\r\n                            layer.alert('\u6587\u7ae0\u5f52\u6863\u6210\u529f\uff01\uff01\uff01')\r\n                        } else {\r\n                            layer.alert('\u6587\u7ae0\u5f52\u6863\u5931\u8d25\uff01\uff01\uff01')\r\n                        }\r\n                    },\r\n                    error: function (jqXHR, textStatus, errorThrown) {\r\n                        alert(jqXHR.responseText);\r\n                        alert(jqXHR.status);\r\n                        alert(jqXHR.readyState);\r\n                        alert(jqXHR.statusText);\r\n                        alert(textStatus);\r\n                        alert(errorThrown);\r\n                    }\r\n                });\r\n        }\r\n\r\n        function doUnuse(columnID,range, currentPage,doSearchFlag,flag,ascdesc) {\r\n            var columnID = searchForm.column.value;\r\n            var doSearchFlag = searchForm.searchFlag.value;\r\n            var flag = searchForm.flag.value;\r\n            var ascdesc = searchForm.ascdesc.value;\r\n            var currentPage = searchForm.pageno.value\r\n            var arttypeval = searchForm.arttype.value;\r\n\r\n            var selArticleIds = \"\";\r\n            $('input:checkbox[name=article]:check".toCharArray();
    _jsp_string10 = "') {\r\n                                    maintitle = \"<a href=javascript:editArticle(\"+ rownum +  \",\" + jsondata.ARTICLES[ii].ID + \",\" + range + \",\" + currentPage + \",\" + doSearchFlag + \",\" + flag + \",\" + ascdesc + \",\" + \"'c');\" + \" title='\" + refersTo + \"'>\" + maintitle + \"</a>\";\r\n                                }\r\n                            }\r\n                        } else {\r\n                            maintitle = \"<a href=javascript:edituploadfile(\" + jsondata.ARTICLES[ii].ID + \",\" + range + \",\" + currentPage + \",\" + doSearchFlag + \",\" + flag + \",\" + ascdesc + \",\" + \"'c')>\" + maintitle + \"</a>\"\r\n                        }\r\n                        if ((referID > 0) || (!isown)){\r\n                            if(useArtType==0)\r\n                                maintitle = maintitle + \"<font color=red style='font-size:9px'>(\u5730\u5740\u5f15\u7528)</font>\";\r\n                            else\r\n                                maintitle = maintitle + \"<font color=red style='font-size:9px'>(\u5185\u5bb9\u5f15\u7528)</font>\";\r\n                        }\r\n\r\n                        var updateAction = \"\";\r\n                        if(writeRight || adminRight || deptWriteRight || editor=='".toCharArray();
    _jsp_string33 = ")'/></li>\r\n                    <li><input name=\"uploadFile\" type=\"button\" value=\"\u4e0a\u4f20\u6587\u4ef6\" class=\"button_bg_3\" onclick='javascript:createuploadfile(".toCharArray();
    _jsp_string7 = "                       totalPage = jsondata.TOTALCOUNT/range;\r\n                    var ascDescFlag = 0;\r\n                    if (jsondata.ASCDESC === 0)\r\n                        ascDescFlag = 1;                    //\u5347\u5e8f\u6392\u5217\r\n                    else\r\n                        ascDescFlag = 0;                    //\u964d\u5e8f\u6392\u5217\r\n\r\n                    if (jsondata.ARTICLEID == 0)            //\u6309\u6587\u7ae0ID\u6392\u5e8f\r\n                        articleid=\"\";\r\n                    else\r\n                        articleid=jsondata.ARTICLEID;\r\n\r\n                    if (typeof(jsondata.TITLE) == \"undefined\")    //\u6309\u6587\u7ae0\u6807\u9898\u6392\u5e8f\r\n                        title = \"\";\r\n                    else\r\n                        title = jsondata.TITLE;\r\n\r\n                    if (typeof(jsondata.VICETITLE) == \"undefined\")     //\u6309\u6587\u7ae0\u526f\u6807\u9898\u6392\u5e8f\r\n                        vicetitle = \"\";\r\n                    else\r\n                        vicetitle = jsondata.VICETITLE;\r\n\r\n                    if (typeof(jsondata.AUTHOR) == \"undefined\")      //\u6309\u6587\u7ae0\u4f5c\u8005\u6392\u5e8f\r\n                        author = \"\";\r\n                    else\r\n                        author = jsondata.AUTHOR;\r\n\r\n                    if (typeof(jsondata.SOURCE) == \"undefined\")       //\u6309\u6587\u7ae0\u6765\u6e90\u6392\u5e8f\r\n                        source = \"\";\r\n                    else\r\n                        source = jsondata.SOURCE;\r\n\r\n                    $(\"#arttypeid option\").remove();\r\n                    //var arttypeval = $(\"#arttypeid\").val();\r\n                    var arttypeval = jsondata.ARTTYPE;\r\n                    $(\"#arttypeid\").val(arttypeval);\r\n                    if (arttypeval===100) {\r\n                        $(\"#arttypeid\").append(\"<option value=-1>\u8bf7\u9009\u62e9</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=100 selected>\u65b0\u7a3f</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=101>\u5df2\u53d1\u5e03</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=102>\u53d1\u5e03\u4e2d</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=103>\u672a\u7528</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=104>\u5f52\u6863</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=105>\u5f85\u8f6c\u6362</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=106>\u5728\u5ba1</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=107>\u9000\u7a3f</option>\");\r\n                    } else if (arttypeval===101) {\r\n                        $(\"#arttypeid\").append(\"<option value=-1>\u8bf7\u9009\u62e9</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=100>\u65b0\u7a3f</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=101 selected>\u5df2\u53d1\u5e03</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=102>\u53d1\u5e03\u4e2d</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=103>\u672a\u7528</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=104>\u5f52\u6863</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=105>\u5f85\u8f6c\u6362</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=106>\u5728\u5ba1</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=107>\u9000\u7a3f</option>\");\r\n                    } else if (arttypeval===102) {\r\n                        $(\"#arttypeid\").append(\"<option value=-1>\u8bf7\u9009\u62e9</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=100>\u65b0\u7a3f</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=101>\u5df2\u53d1\u5e03</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=102 selected>\u53d1\u5e03\u4e2d</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=103>\u672a\u7528</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=104>\u5f52\u6863</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=105>\u5f85\u8f6c\u6362</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=106>\u5728\u5ba1</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=107>\u9000\u7a3f</option>\");\r\n                    } else if (arttypeval===103) {\r\n                        $(\"#arttypeid\").append(\"<option value=-1>\u8bf7\u9009\u62e9</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=100>\u65b0\u7a3f</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=101>\u5df2\u53d1\u5e03</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=102>\u53d1\u5e03\u4e2d</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=103 selected>\u672a\u7528</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=104>\u5f52\u6863</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=105>\u5f85\u8f6c\u6362</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=106>\u5728\u5ba1</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=107>\u9000\u7a3f</option>\");\r\n                    } else if (arttypeval===104) {\r\n                        $(\"#arttypeid\").append(\"<option value=-1>\u8bf7\u9009\u62e9</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=100>\u65b0\u7a3f</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=101>\u5df2\u53d1\u5e03</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=102>\u53d1\u5e03\u4e2d</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=103>\u672a\u7528</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=104 selected>\u5f52\u6863</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=105>\u5f85\u8f6c\u6362</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=106>\u5728\u5ba1</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=107>\u9000\u7a3f</option>\");\r\n                    } else if (arttypeval===105) {\r\n                        $(\"#arttypeid\").append(\"<option value=-1>\u8bf7\u9009\u62e9</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=100>\u65b0\u7a3f</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=101>\u5df2\u53d1\u5e03</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=102>\u53d1\u5e03\u4e2d</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=103>\u672a\u7528</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=104>\u5f52\u6863</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=105 selected>\u5f85\u8f6c\u6362</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=106>\u5728\u5ba1</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=107>\u9000\u7a3f</option>\");\r\n                    } else if (arttypeval===106) {\r\n                        $(\"#arttypeid\").append(\"<option value=-1>\u8bf7\u9009\u62e9</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=100>\u65b0\u7a3f</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=101>\u5df2\u53d1\u5e03</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=102>\u53d1\u5e03\u4e2d</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=103>\u672a\u7528</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=104>\u5f52\u6863</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=105>\u5f85\u8f6c\u6362</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=106 selected>\u5728\u5ba1</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=107>\u9000\u7a3f</option>\");\r\n                    } else if (arttypeval===107) {\r\n                        $(\"#arttypeid\").append(\"<option value=-1>\u8bf7\u9009\u62e9</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=100>\u65b0\u7a3f</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=101>\u5df2\u53d1\u5e03</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=102>\u53d1\u5e03\u4e2d</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=103>\u672a\u7528</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=104>\u5f52\u6863</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=105>\u5f85\u8f6c\u6362</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=106>\u5728\u5ba1</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=107 selected>\u9000\u7a3f</option>\");\r\n                    } else{\r\n                        $(\"#arttypeid\").append(\"<option value=-1 selected>\u8bf7\u9009\u62e9</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=100>\u65b0\u7a3f</option>\");\r\n                        $(\"#arttypeid\").append(\"".toCharArray();
    _jsp_string14 = "')\r\n                                        publishAction = \"<a href=javascript:publish(\" + rownum + \",\" + columnid + \",\" + jsondata.ARTICLES[ii].ID + \",\" + range + \",\" + currentPage + \",\" + doSearchFlag + \",\" + flag + \",\" + ascdesc + \",3,\" +isown +  \");><img src=\\\"../images/public.png\\\" width=\\\"24\\\" height=\\\"23\\\" alt=\\\"\u6587\u7ae0\u53d1\u5e03\\\"></a>\";\r\n                                    else\r\n                                        publishAction = \"&nbsp;\";\r\n                                }\r\n                            }\r\n                        else\r\n                            publishAction = \"&nbsp;\";\r\n\r\n                        htmldata = htmldata + \"                <tr bgcolor=\\\"#FFFFFF\\\" id=\\\"row\" + jsondata.ARTICLES[ii].ID + \"\\\">\\n\";\r\n                        htmldata = htmldata + \"<td align=\\\"center\\\"><input type=\\\"checkbox\\\" name=\\\"article\\\" id=\\\"ckarticle\\\"\" + jsondata.ARTICLES[ii].ID + \" value=\\\"\" + jsondata.ARTICLES[ii].ID  + \"\\\"></td>\";\r\n                        htmldata = htmldata + status_str;\r\n                        htmldata = htmldata + \"<td>\" + rss_val + \"</td>\";\r\n                        htmldata = htmldata + \"<td>\" + maintitle + \"</td>\";\r\n                        htmldata = htmldata + \"<td align=\\\"center\\\" valign=\\\"middle\\\">\" + publishtime + \"</td>\";\r\n                        htmldata = htmldata + \"<td align=\\\"center\\\" valign=\\\"middle\\\">\" + lastupdate + \"</td>\";\r\n                        htmldata = htmldata + \"<td align=\\\"center\\\" valign=\\\"middle\\\">\" + main_weight + \"</td>\";\r\n                        htmldata = htmldata + \"<td align=\\\"center\\\" valign=\\\"middle\\\">\" + vice_weight + \"</td>\";\r\n                        htmldata = htmldata + \"<td align=\\\"center\\\" valign=\\\"middle\\\" >\" + editor + \"</td>\";\r\n                        htmldata = htmldata + \"<td align=\\\"center\\\" valign=\\\"middle\\\"><a href=\\\"javascript:Preview(\"+jsondata.ARTICLES[ii].ID + \",\" + columnid + \");\\\"><img src=\\\"../images/view.png\\\" width=\\\"23\\\" height=\\\"23\\\" /></a></td>\";\r\n                        htmldata = htmldata + \"<td align=\\\"center\\\" valign=\\\"middle\\\">\" + updateAction + \"</td>\";\r\n                        htmldata = htmldata + \"<td align=\\\"center\\\" valign=\\\"middle\\\">\" + deleteAction + \"</td>\";\r\n                        //htmldata = htmldata + \"<td align=\\\"center\\\" valign=\\\"middle\\\">\" + headlineAction + \"</td>\";\r\n                        htmldata = htmldata + \"<td align=\\\"center\\\" valign=\\\"middle\\\">\" + pushAction + \"</td>\";\r\n                        htmldata = htmldata + \"<td align=\\\"center\\\" valign=\\\"middle\\\">\" + publishAction + \"</td>\";\r\n                        htmldata = htmldata + \"</tr>\";\r\n                    }\r\n                    if (articleIds.length>0) articleIds = articleIds.substring(0,articleIds.length-1);\r\n                    htmldata = htmldata + \"            </table>\\n\";\r\n                    htmldata = htmldata + \"           <input type=\\\"hidden\\\" name=\\\"allArticleIds\\\" value=\\\"\" + articleIds + \"\\\">\";\r\n                    htmldata = htmldata + \"         </form>\";\r\n                    htmldata = htmldata + \"        </td>\\n\" +\r\n                        \"    </tr>\\n\" +\r\n                        \"</table>\";\r\n\r\n                    htmldata = htmldata + \"<table width=\\\"100%\\\" border=\\\"0\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\">\";\r\n                    htmldata = htmldata + \"    <tr>\";\r\n                    htmldata = htmldata + \"    <td align='right'>\" + Pagination(jsondata.TOTALCOUNT,columnid,totalPage,currentPage,10,searchflag,jsondata.FLAG,jsondata.ASCDESC,auditflag,pubflag,mediatype,arttypeval)+ \"</td>\";\r\n                    htmldata = htmldata + \"    </tr>\";\r\n                    htmldata = htmldata + \"</table>\";\r\n\r\n                    searchForm.column.value=columnid;\r\n                    searchForm.searchFlag.value=doSearchFlag;\r\n                    searchForm.flag.value=flag;\r\n                    searchForm.ascdesc.value=ascdesc;\r\n                    searchForm.pageno.value=currentPage;\r\n\r\n                    $(\"#contentid\").html(htmldata);\r\n                    //$(\"#listtail\").css('display','block');\r\n                    //$(\"#totalid\").html(jsondata.TOTALCOUNT);\r\n                },\r\n                error: function (jqXHR, textStatus, errorThrown) {\r\n                    alert(jqXHR.responseText);\r\n                    alert(jqXHR.status);\r\n                    alert(jqXHR.readyState);\r\n                    alert(jqXHR.statusText);\r\n                    alert(textStatus);\r\n                    alert(errorThrown);\r\n                }\r\n            });\r\n        }\r\n\r\n        function headlineArticle() {\r\n            alert(\"\u8fd9\u7bc7\u6587\u7ae0\u7f6e\u9876\");\r\n        }\r\n\r\n        function editArticle(rownum,articleID, range, currentPage,doSearchFlag,flag,ascdesc,from) {\r\n            var arttypeval = searchForm.arttype.value;\r\n\r\n            var iWidth=window.screen.availWidth-100;                                                 //\u5f39\u51fa\u7a97\u53e3\u7684\u5bbd\u5ea6;\r\n            var iHeight=800;                                                //\u5f39\u51fa\u7a97\u53e3\u7684\u9ad8\u5ea6;\r\n            //var iTop = (window.screen.availHeight-30-iHeight)/2;        //\u83b7\u5f97\u7a97\u53e3\u7684\u5782\u76f4\u4f4d\u7f6e;\r\n            iTop = 0;\r\n            var iLeft = (window.screen.availWidth-10-iWidth)/2;         //\u83b7\u5f97\u7a97\u53e3\u7684\u6c34\u5e73\u4f4d\u7f6e;\r\n            //articleID:\u5f53\u524d\u7f16\u8f91\u7684\u6587\u7ae0ID\r\n            //range\uff1a\u5206\u9875\u5217\u8868\u6bcf\u9875\u5217\u51fa\u6587\u7ae0\u6761\u6570\r\n            //start\uff1a\u88ab\u7f16\u8f91\u6587\u7ae0\u6240\u5904\u7684\u9875\u53f7\r\n            //searchFlag\uff1a\u662f\u5426\u4e3a\u68c0\u7d22\u7ed3\u679c\u9875\u9762\r\n            //flag\uff1a\u6392\u5e8f\u6807\u8bc6\uff0c\u6807\u8bc6\u4f7f\u7528\u54ea\u4e2a\u5b57\u6bb5\u6392\u5e8f\r\n            //ascdesc:\u6392\u5e8f\u65b9\u5f0f\uff0c\u662f\u5347\u5e8f\u8fd8\u662f\u964d\u5e8f\r\n            window.open(\"editarticle.jsp?article=\" + articleID + \"&range=\" + range + \"&start=\" + currentPage + \"&searchFlag=\" + doSearchFlag + \"&flag=\" + flag + \"&ascdesc=\" + ascdesc + \"&rownum=\" + rownum + \"&fromflag=\" + from + \"&arttype=\" + arttypeval, \"\", \"width=\" + iWidth + \",height=\" + iHeight + \",left=\" + iLeft + \",top=\" + iTop + \",status,scrollbars\");\r\n        }\r\n\r\n        function removeArticle(rownum,articleID, currentPage,flag,ascdesc,range,from) {\r\n            var columnID = searchForm.column.value;\r\n            var doSearchFlag = searchForm.searchFlag.value;\r\n            var arttypeval = searchForm.arttype.value;\r\n\r\n            htmlobj=$.ajax({\r\n                url:\"removearticle.jsp\",\r\n                data:{\r\n                    article:articleID,\r\n                    start:currentPage,\r\n                    flag:flag,\r\n                    ascdesc:ascdesc,\r\n                    arttype:arttypeval,\r\n                    range:range\r\n                },\r\n                dataType:'json',\r\n                async:false,\r\n                success:function(jsondata){\r\n                    if (jsondata.result == \"true\") {\r\n                        //var tr = document.getElementById('row' + articleID);\r\n                        //tr.parentNode.removeChild(tr);\r\n                        //tb.deleteRow(rownum+1);                //table\u5bf9\u8c61\u6839\u636e\u884c\u53f7\u5220\u9664\u8868\u683c\u4e2d\u7684\u884c\r\n                        articlesInfoList(columnID,currentPage,doSearchFlag,flag,ascdesc,null,null,null,arttypeval);\r\n                        layer.alert('\u6587\u7ae0\u5220\u9664\u6210\u529f\uff01\uff01\uff01')\r\n                    } else {\r\n                        layer.alert('\u6587\u7ae0\u5220\u9664\u5931\u8d25\uff01\uff01\uff01');\r\n                    }\r\n                },\r\n                error: function (jqXHR, textStatus, errorThrown) {\r\n                    alert(jqXHR.responseText);\r\n                    alert(jqXHR.status);\r\n                    alert(jqXHR.readyState);\r\n                    alert(jqXHR.statusText);\r\n                    alert(textStatus);\r\n                    alert(errorThrown);\r\n                }\r\n            });\r\n        }\r\n\r\n        function removeRefersArticle(rownum,articleID, currentPage,flag,ascdesc,range,from) {\r\n            var columnID = searchForm.column.value;\r\n            var doSearchFlag = searchForm.searchFlag.value;\r\n            var arttypeval = searchForm.arttype.value;\r\n\r\n            htmlobj=$.ajax({\r\n                url:\"removeRefersArticle.jsp\",\r\n                data:{\r\n                    doDelete:true,\r\n                    column:columnID,\r\n                    article:articleID,\r\n                    searchFlag:doSearchFlag,\r\n                    range:range,\r\n                    pageno:currentPage,\r\n                    flag:flag,\r\n                    arttype:arttypeval,\r\n                    ascdesc:ascdesc\r\n                },\r\n                dataType:'json',\r\n                async:false,\r\n     ".toCharArray();
    _jsp_string5 = ";\r\n            var ascdesc = ".toCharArray();
    _jsp_string22 = "\">\r\n                    <input type=\"hidden\" name=\"searchFlag\" value=\"".toCharArray();
    _jsp_string13 = "') {\r\n                            if (auditflag == 0) {\r\n                                if ((referID > 0) || (!isown))\r\n                                    pushAction = \"&nbsp;\";\r\n                                else\r\n                                    pushAction = \"<a href=\\\"javascript:pushArticle(\" + jsondata.ARTICLES[ii].ID + \",\" + currentPage + \",\" + flag + \",\" + ascdesc + \",\" + range + \",'a');\\\"><img src=\\\"../images/give.png\\\" width=\\\"23\\\" height=\\\"23\\\" /></a>\";\r\n                            } else\r\n                                pushAction = \"&nbsp;\";\r\n                        } else\r\n                            pushAction = \"&nbsp;\";\r\n\r\n                        var publishAction = \"\";\r\n                        if ((status == 1 || status == 4 || status == 5 || status == 6) && auditflag == 0 && emptyflag == 0)\r\n                            if (referID > 0)\r\n                                publishAction = \"&nbsp;\";\r\n                            else{\r\n                                if(!isown) {\r\n                                    if(useArtType == 0)\r\n                                        publishAction = \"&nbsp;\";\r\n                                    else {\r\n                                        if (publishRight || adminRight || deptPublishRight)     //\u7528\u6237\u662f\u5426\u6709\u53d1\u5e03\u6240\u6709\u6587\u7ae0\u7684\u6743\u9650\r\n                                            publishAction = \"<a href=javascript:publish(\" + rownum + \",\" + columnid + \",\" + jsondata.ARTICLES[ii].ID + \",\" + range + \",\" + currentPage + \",\" + doSearchFlag + \",\" + flag + \",\" + ascdesc + \",3,\" + isown +  \");><img src=\\\"../images/public.png\\\" width=\\\"24\\\" height=\\\"23\\\" alt=\\\"\u6587\u7ae0\u53d1\u5e03\\\"></a>\";\r\n                                        else\r\n                                            publishAction = \"&nbsp;\";\r\n                                    }\r\n                                } else if(mediatype == 1){\r\n                                    publishAction = \"&nbsp;\";\r\n                                } else {\r\n                                    if (publishRight || adminRight  || deptPublishRight)     //\u7528\u6237\u662f\u5426\u6709\u6587\u7ae0\u53d1\u5e03\u7684\u6743\u9650\r\n                                        publishAction = \"<a href=javascript:publish(\" + rownum + \",\" + columnid + \",\" + jsondata.ARTICLES[ii].ID + \",\" + range + \",\" + currentPage + \",\" + doSearchFlag + \",\" + flag + \",\" + ascdesc + \",3,\" +isown +  \");><img src=\\\"../images/public.png\\\" width=\\\"24\\\" height=\\\"23\\\" alt=\\\"\u6587\u7ae0\u53d1\u5e03\\\"></a>\";\r\n                                    else if (editor=='".toCharArray();
    _jsp_string35 = ");'/></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div id=\"contentid\"></div>\r\n    </div>\r\n    ".toCharArray();
    _jsp_string8 = "<option value=101>\u5df2\u53d1\u5e03</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=102>\u53d1\u5e03\u4e2d</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=103>\u672a\u7528</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=104>\u5f52\u6863</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=105>\u5f85\u8f6c\u6362</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=106>\u5728\u5ba1</option>\");\r\n                        $(\"#arttypeid\").append(\"<option value=107>\u9000\u7a3f</option>\");\r\n                    }\r\n\r\n                    var column_name = jsondata.COLUMNNAME;\r\n                    $(\"#column_nameid\").html(\"\u6587\u7ae0\u7ba1\u7406 >\" + column_name);\r\n\r\n                    var htmldata = \"<table width=\\\"100%\\\" border=\\\"0\\\" cellspacing=\\\"10\\\" cellpadding=\\\"0\\\">\\n\";\r\n                    htmldata = htmldata + \"    <tr>\\n\" +\r\n                        \"        <td align=\\\"left\\\" valign=\\\"top\\\">\\n\" +\r\n                        \"          <form name=form1>\" +\r\n                        \"            <table id=\\\"articleDataGrid\\\" width=\\\"100%\\\" border=\\\"1\\\" cellspacing=\\\"1\\\" cellpadding=\\\"0\\\" bgcolor=\\\"#CCCCCC\\\" class=\\\"tab_list\\\">\\n\" +\r\n                        \"                <tr>\\n\" +\r\n                        \"                    <td width=\\\"40\\\" align=\\\"center\\\" valign=\\\"middle\\\" bgcolor=\\\"#f4f4f4\\\"><input type=\\\"checkbox\\\" name=\\\"allbox\\\" id=\\\"allboxid\\\" onclick='javascript:CA();' />\u9009\u62e9</td>\\n\" +\r\n                        \"                    <td width=\\\"30\\\" align=\\\"center\\\" valign=\\\"middle\\\" bgcolor=\\\"#f4f4f4\\\">\u72b6\u6001</td>\\n\" +\r\n                        \"                    <td width=\\\"30\\\" align=\\\"center\\\" valign=\\\"middle\\\" bgcolor=\\\"#f4f4f4\\\">RSS</td>\\n\" +\r\n                        \"                    <td width=\\\"270\\\" align=\\\"center\\\" valign=\\\"middle\\\" bgcolor=\\\"#f4f4f4\\\"><a href=\\\"javascript:articlesInfoList(\"+columnid + \",\" +currentPage + \",\" + searchflag +  \",1,\" + ascDescFlag + \",null,null,null,null);\\\">\u6587\u7ae0\u6807\u9898</a></td>\\n\" +\r\n                        \"                    <td width=\\\"120\\\" align=\\\"center\\\" valign=\\\"middle\\\" bgcolor=\\\"#f4f4f4\\\"><a href=\\\"javascript:articlesInfoList(\"+columnid + \",\" +currentPage + \",\" + searchflag + \",4,\" + ascDescFlag + \",null,null,null,null);\\\">\u53d1\u5e03\u65f6\u95f4</a></td>\\n\" +\r\n                        \"                    <td width=\\\"120\\\" align=\\\"center\\\" valign=\\\"middle\\\" bgcolor=\\\"#f4f4f4\\\"><a href=\\\"javascript:articlesInfoList(\"+columnid + \",\" +currentPage + \",\" + searchflag + \",5,\" + ascDescFlag + \",null,null,null,null);\\\">\u4fee\u6539\u65f6\u95f4</a></td>\\n\" +\r\n                        \"                    <td width=\\\"40\\\" align=\\\"center\\\" valign=\\\"middle\\\" bgcolor=\\\"#f4f4f4\\\"><a href=\\\"javascript:articlesInfoList(\"+columnid + \",\" +currentPage + \",\" + searchflag + \",2,\" + ascDescFlag + \",null,null,null,null);\\\">\u4e3b\u6743\u91cd</a></td>\\n\" +\r\n                        \"                    <td width=\\\"40\\\" align=\\\"center\\\" valign=\\\"middle\\\" bgcolor=\\\"#f4f4f4\\\"><a href=\\\"javascript:articlesInfoList(\"+columnid + \",\" +currentPage + \",\" + searchflag + \",3,\" + ascDescFlag + \",null,null,null,null);\\\">\u6b21\u6743\u91cd</a></td>\\n\" +\r\n                        \"                    <td width=\\\"80\\\" align=\\\"center\\\" valign=\\\"middle\\\" bgcolor=\\\"#f4f4f4\\\">\u6587\u7ae0\u7f16\u8f91</td>\\n\" +\r\n                        \"                    <td width=\\\"30\\\" align=\\\"center\\\" valign=\\\"middle\\\" bgcolor=\\\"#f4f4f4\\\">\u9884\u89c8</td>\\n\" +\r\n                        \"                    <td width=\\\"30\\\" align=\\\"center\\\" valign=\\\"middle\\\" bgcolor=\\\"#f4f4f4\\\">\u4fee\u6539</td>\\n\" +\r\n                        \"                    <td width=\\\"30\\\" align=\\\"center\\\" valign=\\\"middle\\\" bgcolor=\\\"#f4f4f4\\\">\u5220\u9664</td>\\n\" +\r\n                        //\"                    <td width=\\\"30\\\" align=\\\"center\\\" valign=\\\"middle\\\" bgcolor=\\\"#f4f4f4\\\">\u5934\u6761</td>\\n\" +\r\n                        \"                    <td width=\\\"30\\\" align=\\\"center\\\" valign=\\\"middle\\\" bgcolor=\\\"#f4f4f4\\\">\u63a8\u9001</td>\\n\" +\r\n                        \"                    <td width=\\\"30\\\" align=\\\"center\\\" valign=\\\"middle\\\" bgcolor=\\\"#f4f4f4\\\">\u53d1\u5e03</td>\\n\" +\r\n                        \"                </tr>\\n\";\r\n                    for(var ii=0;ii<jsondata.ARTICLES.length;ii++) {\r\n                        var maintitle = jsondata.ARTICLES[ii].MAINTITLE;\r\n                        var articleColumnID = jsondata.ARTICLES[ii].COLUMNID;\r\n                        var editor = (typeof(jsondata.ARTICLES[ii].EDITOR)!=\"undefined\")?jsondata.ARTICLES[ii].EDITOR:\"\";\r\n                        var createdate = (typeof(jsondata.ARTICLES[ii].CREATEDATE)!=\"undefined\")?jsondata.ARTICLES[ii].CREATEDATE:\"\";\r\n                        var publishtime = (typeof(jsondata.ARTICLES[ii].PUBLISHTIME)!=\"undefined\")?jsondata.ARTICLES[ii].PUBLISHTIME:\"\";\r\n                        var lastupdate = (typeof(jsondata.ARTICLES[ii].LASTUPDATED)!=\"undefined\")?jsondata.ARTICLES[ii].LASTUPDATED:\"\";\r\n                        var main_weight = jsondata.ARTICLES[ii].DOCLEVEL;\r\n                        var vice_weight = jsondata.ARTICLES[ii].VICEDOCLEVEL;\r\n                        var emptyflag = jsondata.ARTICLES[ii].EMPTYCONTENTFLAG;\r\n                        var status = jsondata.ARTICLES[ii].STATUS;\r\n                        var lockflag = jsondata.ARTICLES[ii].LOCKSTATUS;\r\n                        var pubflag = jsondata.ARTICLES[ii].PUBFLAG;\r\n                        var auditflag = jsondata.ARTICLES[ii].AUDITFLAG;\r\n                        var mediatype = jsondata.ARTICLES[ii].MULTIMEDIATYPE;\r\n                        var isrssflag = jsondata.ARTICLES[ii].ISJOINRSS;\r\n                        var isown = jsondata.ARTICLES[ii].isown;\r\n                        var referID = jsondata.ARTICLES[ii].REFERID;\r\n                        var refersFrom = jsondata.ARTICLES[ii].RefersFrom;\r\n                        var refersTo = jsondata.ARTICLES[ii].RefersTo;\r\n                        var useArtType = jsondata.ARTICLES[ii].useArticleType;\r\n                        var status_str = null;\r\n                        var rownum = ii;\r\n\r\n                        articleIds = articleIds + jsondata.ARTICLES[ii].ID + \",\";\r\n\r\n                        var filename = jsondata.ARTICLES[ii].FILENAME;\r\n                        var ext = null;\r\n                        if (filename != null) {\r\n                            var posi = filename.indexOf(\".\");\r\n                            if(posi>-1) {\r\n                                ext = filename.substring(posi+1);\r\n                                ext = ext.toLowerCase();\r\n                            }\r\n                        }\r\n                        if (ext != null) {\r\n                            if (ext==\"pdf\")\r\n                                ext = \"pdf.gif\";\r\n                            else if (ext==\"doc\")\r\n                                ext = \"word.gif\";\r\n                            else if (ext==\"xls\")\r\n                                ext = \"excel.gif\";\r\n                            else if (ext==\"zip\" || ext==\"rar\" || ext==\"tar\")\r\n                                ext = \"zip.gif\";\r\n                            else if (ext==\"gif\")\r\n                                ext = \"gif.gif\";\r\n                            else if (ext==\"jpg\" || ext==\"jpeg\")\r\n                                ext = \"jpg.gif\";\r\n                            else if (ext==\"html\" || ext==\"htm\" || ext==\"shtml\" || ext==\"jsp\" || ext==\"asp\" || ext==\"php\" || ext==\"aspx\")\r\n                                ext = \"htm.gif\";\r\n                            else if (ext==\"ppt\")\r\n                                ext = \"ppt.gif\";\r\n                            else if (ext==\"png\" || ext==\"bmp\")\r\n                                ext = \"tu.gif\";\r\n                            else\r\n                                ext = \"wen.gif\";\r\n                        } else {\r\n                            ext = \"wen.gif\";\r\n                        }\r\n\r\n                        if (emptyflag == 0) {\r\n                            if (status == 0) {\r\n                                status_str = \"<td align=center><img src=\\\"../images/button/wei.gif\\\" alt=\\\"\u672a\u4f7f\u7528\u6587\u7ae0\\\"></td>\";\r\n                            } else if (status == 1 || status == 5 || status == 4 || status == 6) {\r\n                                if (auditflag == 0)\r\n                                    switch (pubflag) {\r\n                   ".toCharArray();
    _jsp_string9 = "                     case 0:\r\n                                            status_str = \"<td align=center><img src=\\\"../images/button/yi.gif\\\" border=0 alt=\\\"\u5df2\u53d1\u5e03\\\"></td>\";\r\n                                            break;\r\n                                        case 1:\r\n                                            if(mediatype == 1){\r\n                                                status_str = \"<td align=center><img src=\\\"../images/button/dmt.gif\\\" border=0 alt=\\\"\u591a\u5a92\u4f53\\\"></td>\";\r\n                                            }else{\r\n                                                status_str = \"<td align=center><img src=\\\"../images/button/xin.gif\\\" border=0 alt=\\\"\u65b0\u7a3f\\\"></td>\";\r\n                                            }\r\n                                            break;\r\n                                        case 2:\r\n                                            status_str = \"<td align=center><font color=red>\u53d1\u5e03\u4e2d</font></td>\";\r\n                                            break;\r\n                                        default:\r\n                                            break;\r\n                                    }\r\n                                else if (auditflag == 1)\r\n                                    status_str = \"<td align=center><img src=\\\"../images/button/shen.gif\\\" border=0 alt=\\\"\u5728\u5ba1\\\"></td>\";\r\n                                else\r\n                                    status_str = \"<td align=center><img src=\\\"../images/button/tui.gif\\\" border=0 alt=\\\"\u9000\u7a3f\\\"></td>\";\r\n                            } else if(status == 3){      //\u591a\u5a92\u4f53\u6587\u4ef6\u7b49\u5f85\u8f6c\u6362\u72b6\u6001\r\n                                status_str = \"<td align=center><img src=\\\"../images/button/dai.gif\\\" border=0 alt=\\\"\u7b49\u5f85\\\"></td>\";\r\n                            }  else {                                  //2\u662f\u5f52\u6863\u72b6\u6001\r\n                                status_str = \"<td align=center><img src=\\\"../images/button/dang.gif\\\" border=0 alt=\\\"\u5b58\u6863\\\"></td>\";\r\n                            }\r\n                        } else {\r\n                            status_str = \"<td align=center><img src=\\\"../images/button/\" + ext + \"\\\" border=0 alt=\\\"\u4e0a\u4f20\u6587\u4ef6\\\"></td>\";\r\n                        }\r\n\r\n                        var rss_val = \"\";\r\n                        if (isrssflag===1) rss_val = \"R\";\r\n\r\n                        if (emptyflag == 0) {\r\n                            if ((referID > 0) || (!isown)) {\r\n                                if((refersFrom == null)||(refersFrom.equals(\"\"))||(refersFrom.length()==0)) refersFrom = \"\";\r\n                                maintitle = \"<a title='\" + refersFrom + \"'>\" + maintitle + \"</a>\"\r\n                            } else{\r\n                                if((refersTo == null)||(refersTo.equals(\"\"))||(refersTo.length()==0)) refersTo = \"\";\r\n                                if(writeRight || adminRight || editor=='".toCharArray();
    _jsp_string25 = ",true,".toCharArray();
    _jsp_string19 = "\">\r\n                    <input type=\"hidden\" name=\"pageno\" value=\"".toCharArray();
    _jsp_string37 = "\r\n        });\r\n        $(\"#treebox\").css(\"height\",document.documentElement.clientHeight-60);\r\n\r\n        var laydate = layui.laydate;\r\n        laydate.render({\r\n            elem: '#sdate', //\u6307\u5b9a\u5143\u7d20\r\n            type:\"datetime\"\r\n        });\r\n\r\n        laydate.render({\r\n            elem: '#edate', //\u6307\u5b9a\u5143\u7d20\r\n            type:\"datetime\"\r\n        });\r\n    });\r\n</script>\r\n</body>\r\n</html>\r\n".toCharArray();
  }
}
